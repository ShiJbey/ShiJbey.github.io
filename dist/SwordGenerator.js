"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.SwordGenerator=exports.Sword=void 0;var _three=require("three"),seedrandom=_interopRequireWildcard(require("seedrandom"));function _interopRequireWildcard(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c in a)if(Object.prototype.hasOwnProperty.call(a,c)){var d=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(a,c):{};d.get||d.set?Object.defineProperty(b,c,d):b[c]=a[c]}return b.default=a,b}function _defineProperties(a,b){for(var c,d=0;d<b.length;d++)c=b[d],c.enumerable=c.enumerable||!1,c.configurable=!0,"value"in c&&(c.writable=!0),Object.defineProperty(a,c.key,c)}function _createClass(a,b,c){return b&&_defineProperties(a.prototype,b),c&&_defineProperties(a,c),a}function _classCallCheck(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function _defineProperty(a,b,c){return b in a?Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[b]=c,a}function getRandomInt(a,b,c){var d=Math.floor,e=Math.ceil;return b=e(b),c=d(c),d(a()*(c-b))+b}function getSlope(a,b,c,d){return(d-b)/(c-a)}var Sword=function a(b){_classCallCheck(this,a),_defineProperty(this,"style",void 0),_defineProperty(this,"geometry",void 0),_defineProperty(this,"triangles",void 0),_defineProperty(this,"vertices",void 0),_defineProperty(this,"colors",void 0),_defineProperty(this,"normals",void 0),this.style=b,this.geometry=new _three.BufferGeometry,this.triangles=[],this.vertices=[],this.colors=[],this.normals=[]};exports.Sword=Sword;var SwordGenerator=function(){var b=Math.floor;function a(b){_classCallCheck(this,a),_defineProperty(this,"seed",void 0),_defineProperty(this,"randGenerator",void 0),this.seed=b,this.randGenerator=""==b?seedrandom.default():seedrandom.default(b)}return _createClass(a,[{key:"generateSword",value:function d(a,b){var c=new Sword(a.style);this.buildBlade(a,b,c),this.buildGuard(a,b,c),this.buildHandle(a,b,c),this.buildPommel(a,b,c),c.geometry.addAttribute("position",new _three.BufferAttribute(new Float32Array(c.vertices),3)),c.geometry.addAttribute("color",new _three.BufferAttribute(new Float32Array(c.colors),3)),c.geometry.computeVertexNormals();new _three.MeshPhongMaterial({specular:1118481,shininess:250,side:_three.DoubleSide,vertexColors:_three.VertexColors});return c}},{key:"buildBlade",value:function x(c,d,e){var f=c.length,g=d.baseWidth*d.fullerWidthRatio,h=d.bladeThickness/4,j=getRandomInt(this.randGenerator,1,d.maxBaseDivs+1),k=getRandomInt(this.randGenerator,1,d.maxMidDivs+1),l=b(this.randGenerator()*d.maxTipDivs)+1,m=j+k+l,n=f*d.bladeBaseProportion,o=f*d.bladeMidProportion,p=f*(1-(d.bladeBaseProportion+d.bladeMidProportion));e.vertices.concat(a.createBladeCrossSection(c.baseWidth,h,g,d));var q=a.extrudeTopMultiple(e.vertices,new _three.Vector3(0,f/m,0),m);e.vertices.concat(q.vertices),e.triangles.concat(q.triangles);var r=a.getAllVertsIndicesAsLayers(e.vertices,m,f),s=a.getLeftEdgeVertIndices(e.vertices,c.baseWidth),t=a.getRightEdgeVertIndices(e.vertices,c.baseWidth);e.vertices=a.modifyEdgeWidth(this,e.vertices,s,t,c.baseWidth,d.bladeWidthToleranceRatio);var u=a.getTopVertIndices(e.vertices);e.vertices=a.createBladeTip(e.vertices,u);var v=0;if(0==e.vertices.length%3)v=e.vertices.length/3;else throw"Incorrect number of vertex values";for(var w=0;w<v;w++)e.colors.push(200),e.colors.push(200),e.colors.push(200);return e}},{key:"buildGuard",value:function n(a,b,c){for(var d=3<arguments.length&&void 0!==arguments[3]?arguments[3]:.3,e=4<arguments.length&&void 0!==arguments[4]?arguments[4]:.3,f=5<arguments.length&&void 0!==arguments[5]?arguments[5]:1,g=6<arguments.length&&void 0!==arguments[6]?arguments[6]:4,h=new _three.BoxGeometry(g*d,.2,f),j=new _three.BufferGeometry().fromGeometry(h),k=j.getAttribute("position"),l=0;l<k.count;l++)c.vertices.push(k.getX(l)),c.vertices.push(k.getY(l)),c.vertices.push(k.getZ(l));for(var k=j.getAttribute(""),l=0;l<k.count;l++)c.vertices.push(k.getX(l)),c.vertices.push(k.getY(l)),c.vertices.push(k.getZ(l));for(var l=0;l<k.count;l++)c.colors.push(112),c.colors.push(82),c.colors.push(0);for(var m=j.getIndex(),l=0;l<m.count;l++)c.vertices.push(k.getX(l)),c.vertices.push(k.getY(l)),c.vertices.push(k.getZ(l));return c}},{key:"buildHandle",value:function m(a,b,c){var d=3<arguments.length&&void 0!==arguments[3]?arguments[3]:1.35,e=4<arguments.length&&void 0!==arguments[4]?arguments[4]:.1,f=5<arguments.length&&void 0!==arguments[5]?arguments[5]:1,g=new _three.CylinderGeometry(e,e,d,8);g.translate(0,-d/2,0);for(var h=new _three.BufferGeometry().fromGeometry(g),j=h.getAttribute("position"),k=0;k<j.count;k++)c.vertices.push(j.getX(k)),c.vertices.push(j.getY(k)),c.vertices.push(j.getZ(k));for(var j=h.getAttribute(""),k=0;k<j.count;k++)c.vertices.push(j.getX(k)),c.vertices.push(j.getY(k)),c.vertices.push(j.getZ(k));for(var k=0;k<j.count;k++)c.colors.push(112),c.colors.push(82),c.colors.push(0);for(var l=h.getIndex(),k=0;k<l.count;k++)c.vertices.push(j.getX(k)),c.vertices.push(j.getY(k)),c.vertices.push(j.getZ(k));return c}},{key:"buildPommel",value:function m(a,b,c){var d=3<arguments.length&&void 0!==arguments[3]?arguments[3]:.6,e=4<arguments.length&&void 0!==arguments[4]?arguments[4]:1.35,f=5<arguments.length&&void 0!==arguments[5]?arguments[5]:.5,g=new _three.SphereGeometry(f*d,5,4);g.translate(0,-e,0);for(var h=new _three.BufferGeometry().fromGeometry(g),j=h.getAttribute("position"),k=0;k<j.count;k++)c.vertices.push(j.getX(k)),c.vertices.push(j.getY(k)),c.vertices.push(j.getZ(k));for(var j=h.getAttribute(""),k=0;k<j.count;k++)c.vertices.push(j.getX(k)),c.vertices.push(j.getY(k)),c.vertices.push(j.getZ(k));for(var k=0;k<j.count;k++)c.colors.push(225),c.colors.push(200),c.colors.push(90);for(var l=h.getIndex(),k=0;k<l.count;k++)c.vertices.push(j.getX(k)),c.vertices.push(j.getY(k)),c.vertices.push(j.getZ(k));return c}}],[{key:"createBladeCrossSection",value:function f(a,b,c,d){var e=[];return e.push(a/-2),e.push(0),e.push(0),e.push(c/-2),e.push(0),e.push(d.bladeThickness/2),d.applyFuller?(e.push(0),e.push(0),e.push(d.bladeThickness/-2+b)):(e.push(0),e.push(0),e.push(d.bladeThickness/-2)),e.push(c/2),e.push(0),e.push(d.bladeThickness/-2),e.push(a/2),e.push(0),e.push(0),e.push(c/2),e.push(0),e.push(d.bladeThickness/2),d.applyFuller?(e.push(0),e.push(0),e.push(d.bladeThickness/2-b)):(e.push(0),e.push(0),e.push(d.bladeThickness/2)),e.push(c/-2),e.push(0),e.push(d.bladeThickness/2),e}},{key:"extrudeTopMultiple",value:function j(b,c,d){for(var e,f=b.slice(),g=[],h=0;h<d;h++)e=a.extrudeTop(f,c),f.concat(e.vertices),g.concat(e.triangles);return{vertices:f,triangles:g}}},{key:"extrudeTop",value:function f(b,c){var d=a.getTopVertIndices(b),e=a.extrudeFace(b,d,c);return e}},{key:"extrudeFace",value:function s(a,b,c){if(0==b.length)throw"No vertices given to extrude";var d=0;if(0==a.length%3)d=a.length/3;else throw"Incorrect number of vertex values";for(var e=d,f=[],g=[],h=0;h<b.length;h++){var k=a[3*b[h]],l=a[3*b[h]+1],m=a[3*b[h]+2],n=k+c.x,o=l+c.y,p=m+c.z;g.push(n),g.push(o),g.push(p),f.push(e+h)}for(var h=0,q=0,r=[];h<b.length;)h==b.length-1?(r.push(f[q]),r.push(b[0]),r.push(b[h]),r.push(f[0]),r.push(b[0]),r.push(f[q])):(r.push(f[q]),r.push(b[h+1]),r.push(b[h]),r.push(f[q+1]),r.push(b[h+1]),r.push(f[q])),h++,q++;return{vertices:g,triangles:r}}},{key:"modifyEdgeWidth",value:function m(a,b,c,d,e,f){for(var g=!(6<arguments.length&&void 0!==arguments[6])||arguments[6],h=e-f*e,j=e+f*e,k=e,l=0;l<c.length;l++)k=e+a.randGenerator()*(j-h),b[3*c[l]+0]=-(k/2);for(var l=0;l<d.length;l++)g?l<c.length&&(b[3*d[l]+0]=-b[3*c[l]]):(k=e+a.randGenerator()*(j-h),b[3*d[l]+0]=k/2);return b}},{key:"createBladeTip",value:function d(a,b){for(var c=0;c<b.length;c++)a[3*b[c]+0]=0,a[3*b[c]+2]=0;return a}},{key:"getAllVertsIndicesAsLayers",value:function h(a,b){var c=[],d=0;if(0==a.length%3)d=a.length/3;else throw"Incorrect number of vertex values";for(var e,f=0;f<b;f++){e=[];for(var g=0;g<d;g++)a[3*g+1]==f&&e.push(g);c.push(e)}return c}},{key:"getTopVertIndices",value:function h(a,b){var c=[],d=0;if(0==a.length%3)d=a.length/3;else throw"Incorrect number of vertex values";if(null!=b)for(var e=0;e<d;e++)a[3*e+1]==b&&c.push(e);else{for(var f=-1,g=-1,e=0;e<d;e++)a[3*e+1]>f&&(g=e,f=a[3*e+1]);for(var e=0;e<d;e++)a[3*e+1]==f&&c.push(e)}return c}},{key:"getLeftEdgeVertIndices",value:function f(a,b){var c=[],d=0;if(0==a.length%3)d=a.length/3;else throw"Incorrect number of vertex values";for(var e=0;e<d;e++)a[3*e]==-b/2&&c.push(e);return c}},{key:"getRightEdgeVertIndices",value:function f(a,b){var c=[],d=0;if(0==a.length%3)d=a.length/3;else throw"Incorrect number of vertex values";for(var e=0;e<d;e++)a[3*e]==b/2&&c.push(e);return c}}]),a}();exports.SwordGenerator=SwordGenerator;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uL3NyYy9Td29yZEdlbmVyYXRvci50cyJdLCJuYW1lcyI6WyJnZXRSYW5kb21JbnQiLCJyYW5kIiwibWluIiwibWF4IiwiTWF0aCIsImZsb29yIiwiY2VpbCIsImdldFNsb3BlIiwieDEiLCJ5MSIsIngyIiwieTIiLCJTd29yZCIsInN0eWxlIiwiZ2VvbWV0cnkiLCJCdWZmZXJHZW9tZXRyeSIsInRyaWFuZ2xlcyIsInZlcnRpY2VzIiwiY29sb3JzIiwibm9ybWFscyIsIlN3b3JkR2VuZXJhdG9yIiwic2VlZCIsInJhbmRHZW5lcmF0b3IiLCJzZWVkcmFuZG9tIiwiZGVmYXVsdCIsInRlbXBsYXRlIiwiZ2VuUGFyYW1zIiwic3dvcmQiLCJidWlsZEJsYWRlIiwiYnVpbGRHdWFyZCIsImJ1aWxkSGFuZGxlIiwiYnVpbGRQb21tZWwiLCJhZGRBdHRyaWJ1dGUiLCJCdWZmZXJBdHRyaWJ1dGUiLCJGbG9hdDMyQXJyYXkiLCJjb21wdXRlVmVydGV4Tm9ybWFscyIsIk1lc2hQaG9uZ01hdGVyaWFsIiwic3BlY3VsYXIiLCJzaGluaW5lc3MiLCJzaWRlIiwiRG91YmxlU2lkZSIsInZlcnRleENvbG9ycyIsIlZlcnRleENvbG9ycyIsImJsYWRlTGVuZ3RoIiwibGVuZ3RoIiwiZnVsbGVyV2lkdGgiLCJiYXNlV2lkdGgiLCJmdWxsZXJXaWR0aFJhdGlvIiwiZnVsbGVyRGVwdGgiLCJibGFkZVRoaWNrbmVzcyIsIm51bUJhc2VEaXZzIiwibWF4QmFzZURpdnMiLCJudW1NaWREaXZzIiwibWF4TWlkRGl2cyIsIm51bVRpcERpdnMiLCJtYXhUaXBEaXZzIiwidG90YWxCbGFkZURpdnMiLCJiYXNlU2VjdGlvbkxlbmd0aCIsImJsYWRlQmFzZVByb3BvcnRpb24iLCJtaWRTZWN0aW9uTGVuZ3RoIiwiYmxhZGVNaWRQcm9wb3J0aW9uIiwidGlwU2VjdGlvbkxlbmd0aCIsImNvbmNhdCIsImNyZWF0ZUJsYWRlQ3Jvc3NTZWN0aW9uIiwiZ2VuZXJhdGVkR2VvbWV0cnkiLCJleHRydWRlVG9wTXVsdGlwbGUiLCJWZWN0b3IzIiwidmVydEluZGljZXNJbkxheWVycyIsImdldEFsbFZlcnRzSW5kaWNlc0FzTGF5ZXJzIiwibGVmdEVkZ2VWZXJ0SW5kaWNlcyIsImdldExlZnRFZGdlVmVydEluZGljZXMiLCJyaWdodEVkZ2VWZXJ0SW5kaWNlcyIsImdldFJpZ2h0RWRnZVZlcnRJbmRpY2VzIiwibW9kaWZ5RWRnZVdpZHRoIiwiYmxhZGVXaWR0aFRvbGVyYW5jZVJhdGlvIiwidG9wRmFjZVZlcnRJbmRpY2VzIiwiZ2V0VG9wVmVydEluZGljZXMiLCJjcmVhdGVCbGFkZVRpcCIsIm51bVZlcnRpY2VzIiwiaSIsInB1c2giLCJibGFkZVdpZHRoIiwiYmxhZGV0aGlja25lc3MiLCJndWFyZFRoaWNrbmVzcyIsImd1YXJkQmxhZGVSYXRpbyIsImd1YXJkR2VvbWV0cnkiLCJCb3hHZW9tZXRyeSIsImd1YXJkQnVmZmVyR2VvbWV0cnkiLCJmcm9tR2VvbWV0cnkiLCJnZXRBdHRyaWJ1dGUiLCJjb3VudCIsImdldFgiLCJnZXRZIiwiZ2V0WiIsImdldEluZGV4IiwiaGFuZGxlTGVuZ3RoIiwiaGFuZGxlV2lkdGgiLCJudW1IYW5kcyIsImhhbmRsZUdlb21ldHJ5IiwiQ3lsaW5kZXJHZW9tZXRyeSIsInRyYW5zbGF0ZSIsImhhbmRsZUJ1ZmZlckdlb21ldHJ5IiwicG9tbWVsQmxhZGVXaWR0aFJhdGlvIiwicG9tbWVsR2VvbWV0cnkiLCJTcGhlcmVHZW9tZXRyeSIsInBvbW1lbEJ1ZmZlckdlb21ldHJ5IiwiYXBwbHlGdWxsZXIiLCJkaXJlY3Rpb24iLCJudW1SZXBlYXQiLCJidWZmZXJlZFZlcnRpY2VzIiwic2xpY2UiLCJidWZmZXJlZFRyaWFuZ2xlcyIsImV4dHJ1ZGVUb3AiLCJ0b3BWZXJ0SW5kaWNlcyIsImV4dHJ1ZGVkR2VvbSIsImV4dHJ1ZGVGYWNlIiwiZmFjZUluZGljZXMiLCJwcmlvclZlcnRDb3VudCIsIm5ld1ZlcnRleEluZGljZXMiLCJuZXdWZXJ0aWNlcyIsIm9sZFZlcnRleFgiLCJvbGRWZXJ0ZXhZIiwib2xkVmVydGV4WiIsIm5ld1ZlcnRleFgiLCJ4IiwibmV3VmVydGV4WSIsInkiLCJuZXdWZXJ0ZXhaIiwieiIsImoiLCJuZXdUcmlhbmdsZXMiLCJzd29yZEdlbmVyYXRvciIsInRlbXBsYXRlQmxhZGVXaWR0aCIsIndpZHRoVG9sZXJhbmNlUmF0aW8iLCJzeW1tZXRyaWMiLCJtaW5CbGFkZVdpZHRoIiwibWF4QmxhZGVXaWR0aCIsImRpdmlzaW9uV2lkdGgiLCJudW1EaXZzIiwidmVydGV4SW5kaWNlcyIsInZlcnRpY2VzSW5MYXllciIsImdlb21IZWlnaHQiLCJtYXhIZWlnaHQiLCJpbmRleE9mTWF4IiwibGVmdEVkZ2VJbmRpY2VzIiwicmlnaHRFZGdlSW5kaWNlcyJdLCJtYXBwaW5ncyI6IjZnQ0FrQkEsUUFBU0EsQ0FBQUEsWUFBVCxDQUFzQkMsQ0FBdEIsQ0FBOENDLENBQTlDLENBQTREQyxDQUE1RCxDQUFtRixPQUV6RUMsSUFBSSxDQUFDQyxLQUZvRSxHQUN6RUQsSUFBSSxDQUFDRSxJQURvRSxDQUcvRSxNQUZBSixDQUFBQSxDQUFHLENBQUcsRUFBVUEsQ0FBVixDQUVOLENBREFDLENBQUcsQ0FBRyxFQUFXQSxDQUFYLENBQ04sQ0FBTyxFQUFXRixDQUFJLElBQU1FLENBQUcsQ0FBR0QsQ0FBWixDQUFmLEVBQW1DQSxDQUM3QyxDQU1ELFFBQVNLLENBQUFBLFFBQVQsQ0FBa0JDLENBQWxCLENBQWdDQyxDQUFoQyxDQUE2Q0MsQ0FBN0MsQ0FBMERDLENBQTFELENBQWdGLENBQzVFLE1BQU8sQ0FBQ0EsQ0FBRSxDQUFHRixDQUFOLEdBQWFDLENBQUUsQ0FBR0YsQ0FBbEIsQ0FDVixDLEdBTVlJLENBQUFBLEssQ0FTVCxXQUFZQyxDQUFaLENBQTJCLG9RQUN2QixLQUFLQSxLQUFMLENBQWFBLENBRFUsQ0FFdkIsS0FBS0MsUUFBTCxDQUFnQixHQUFJQyxzQkFGRyxDQUd2QixLQUFLQyxTQUFMLENBQWlCLEVBSE0sQ0FJdkIsS0FBS0MsUUFBTCxDQUFnQixFQUpP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LENBQVEsQ0FBQzJCLE1BQVQsQ0FBa0IsQ0FBdEIsQ0FDSWtDLENBQVcsQ0FBRzdELENBQVEsQ0FBQzJCLE1BQVQsQ0FBbUIsQ0FEckMsS0FJSSxNQUFNLG1DQUFOLENBR0osSUFBSyxHQUFJbUMsQ0FBQUEsQ0FBQyxDQUFHLENBQWIsQ0FBZ0JBLENBQUMsQ0FBR0QsQ0FBcEIsQ0FBaUNDLENBQUMsRUFBbEMsQ0FDUTlELENBQVEsQ0FBSyxDQUFKLENBQUE4RCxDQUFELENBQVIsRUFBbUJFLENBQVUsQ0FBRyxDQUR4QyxFQUVRZ0UsQ0FBZ0IsQ0FBQ2pFLElBQWpCLENBQXNCRCxDQUF0QixDQUZSLENBS0EsTUFBT2tFLENBQUFBLENBQ1YsQyIsInNvdXJjZXNDb250ZW50IjpbIi8vLyA8cmVmZXJlbmNlIHR5cGVzPVwidGhyZWVcIiAvPlxyXG4vLy8gPHJlZmVyZW5jZSB0eXBlcz1cInNlZWRyYW5kb21cIiAvPlxyXG5cclxuaW1wb3J0IHsgRG91YmxlU2lkZSwgQnVmZmVyR2VvbWV0cnksIEJ1ZmZlckF0dHJpYnV0ZSwgQm94R2VvbWV0cnksIE1lc2hQaG9uZ01hdGVyaWFsLCBWZXJ0ZXhDb2xvcnMsIFZlY3RvcjMsIEN5bGluZGVyR2VvbWV0cnksIFNwaGVyZUdlb21ldHJ5IH0gZnJvbSBcInRocmVlXCI7XHJcbmltcG9ydCAqIGFzIHNlZWRyYW5kb20gZnJvbSBcInNlZWRyYW5kb21cIjtcclxuXHJcbi8qKlxyXG4gKiBPdXRwdXQgb2JqZWN0IHVzZWQgd2hlbiBleHRydWRpbmcgZmFjZXNcclxuICovXHJcbmludGVyZmFjZSBWZXJ0aWNlc0FuZFRyaWFuZ2xlcyB7XHJcbiAgICB2ZXJ0aWNlcyA6IG51bWJlcltdO1xyXG4gICAgdHJpYW5nbGVzIDogbnVtYmVyW107XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBHaXZlbiBhIHJhbmRvbSBudW1iZXIgZ2VuZXJhdG9yIGFuZCBhIG1pbiBhbmQgbWF4IHZhbHVlLFxyXG4gKiByZXR1cm5zIGEgcmFuZG9tIGludCB0aGF0IGlzIGluIHRoZSByYW5nZSBbbWluLG1heClcclxuICovXHJcbmZ1bmN0aW9uIGdldFJhbmRvbUludChyYW5kIDogc2VlZHJhbmRvbS5wcm5nLCBtaW4gOiBudW1iZXIsIG1heCA6IG51bWJlcikgOiBudW1iZXIge1xyXG4gICAgbWluID0gTWF0aC5jZWlsKG1pbik7XHJcbiAgICBtYXggPSBNYXRoLmZsb29yKG1heCk7XHJcbiAgICByZXR1cm4gTWF0aC5mbG9vcihyYW5kKCkgKiAobWF4IC0gbWluKSkgKyBtaW47XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBHaXZlbiB0aGUgeCBhbmQgeSBjb29yZGluYXRlcyBvZiB0d28gcG9pbnRzIGluIDJEIHNwYWNlLFxyXG4gKiBSZXR1cm5zIHRoZSBzbG9wZSBiZXR3ZWVuIHRoZSB0d28gcG9pbnRzXHJcbiAqL1xyXG5mdW5jdGlvbiBnZXRTbG9wZSh4MSA6IG51bWJlciwgIHkxIDogbnVtYmVyLCB4MiA6IG51bWJlciwgeTIgOiBudW1iZXIpIDogbnVtYmVyIHtcclxuICAgIHJldHVybiAoeTIgLSB5MSkgLyAoeDIgLSB4MSk7XHJcbn1cclxuXHJcbi8qKiBcclxuICogU3dvcmRzIGFyZSB0aGUgd2VhcG9uIHR5cGUgdGhhdCBoYXMgYW4gYXNzb2NpYXRlZFxyXG4gKiBzdHllIGFuZCBUSFJFRSBnZW9tZXRyeSBvYmplY3RcclxuICovXHJcbmV4cG9ydCBjbGFzcyBTd29yZCB7XHJcblxyXG4gICAgcHVibGljIHN0eWxlIDogc3RyaW5nOyAgICAgICAgICAgICAgICAgIFxyXG4gICAgcHVibGljIGdlb21ldHJ5IDogVEhSRUUuQnVmZmVyR2VvbWV0cnk7XHJcbiAgICBwdWJsaWMgdHJpYW5nbGVzIDogbnVtYmVyW107XHJcbiAgICBwdWJsaWMgdmVydGljZXMgOiBudW1iZXJbXTtcclxuICAgIHB1YmxpYyBjb2xvcnMgOiBudW1iZXJbXTtcclxuICAgIHB1YmxpYyBub3JtYWxzIDogbnVtYmVyW107XHJcblxyXG4gICAgY29uc3RydWN0b3Ioc3R5bGU6IHN0cmluZykge1xyXG4gICAgICAgIHRoaXMuc3R5bGUgPSBzdHlsZTtcclxuICAgICAgICB0aGlzLmdlb21ldHJ5ID0gbmV3IEJ1ZmZlckdlb21ldHJ5KCk7XHJcbiAgICAgICAgdGhpcy50cmlhbmdsZXMgPSBbXTtcclxuICAgICAgICB0aGlzLnZlcnRpY2VzID0gW107XHJcbiAgICAgICAgdGhpcy5jb2xvcnMgPSBbXTtcclxuICAgICAgICB0aGlzLm5vcm1hbHMgPSBbXTtcclxuICAgIH1cclxuXHJcbn1cclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgU3dvcmRUZW1wbGF0ZSB7XHJcbiAgICBzdHlsZSA6IHN0cmluZztcclxuICAgIGJhc2VXaWR0aCA6IG51bWJlcjtcclxuICAgIHdpZHRoTWFyZ2luUmF0aW8gOiBudW1iZXI7XHJcbiAgICBsZW5ndGggOiBudW1iZXI7XHJcbn1cclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgR2VuZXJhdGlvblBhcmFtZXRlcnMge1xyXG4gICAgYmFzZVdpZHRoIDogbnVtYmVyO1xyXG4gICAgbWF4QmFzZURpdnMgOiBudW1iZXI7XHJcbiAgICBtYXhNaWREaXZzIDogbnVtYmVyO1xyXG4gICAgbWF4VGlwRGl2cyA6IG51bWJlcjtcclxuICAgIG1pbkRpdkxlbmd0aCA6IG51bWJlcjtcclxuICAgIGJsYWRlV2lkdGhUb2xlcmFuY2VSYXRpbyA6IG51bWJlcjtcclxuICAgIGJsYWRlVGhpY2tuZXNzIDogbnVtYmVyO1xyXG4gICAgZnVsbGVyV2lkdGhSYXRpbyA6IG51bWJlcjtcclxuICAgIGVxdWFsQmFzZURpdnMgOiBib29sZWFuO1xyXG4gICAgZXF1YWxNaWREaXZzIDogYm9vbGVhbjtcclxuICAgIGVxdWFsVGlwRGl2cyA6IGJvb2xlYW47XHJcbiAgICBibGFkZUJhc2VQcm9wb3J0aW9uIDogbnVtYmVyO1xyXG4gICAgYmxhZGVNaWRQcm9wb3J0aW9uIDogbnVtYmVyO1xyXG4gICAgYXBwbHlGdWxsZXIgOiBib29sZWFuO1xyXG59XHJcblxyXG4vKipcclxuICogRmFjdG9yeSBjbGFzcyB0aGF0IHByb2R1Y2VzIGluc3RhbmNlcyBvZlxyXG4gKiBzd29yZHMgdXNpbmcgYSBzZXQgb2YgcGFyYW1ldGVyc1xyXG4gKi9cclxuZXhwb3J0IGNsYXNzIFN3b3JkR2VuZXJhdG9yIHtcclxuXHJcbiAgICBwdWJsaWMgc2VlZCA6IHN0cmluZztcclxuICAgIHB1YmxpYyByYW5kR2VuZXJhdG9yIDogc2VlZHJhbmRvbS5wcm5nO1xyXG4gICAgXHJcbiAgICBjb25zdHJ1Y3RvcihzZWVkIDogc3RyaW5nKSB7XHJcbiAgICAgICAgLy8gVGhlIGdlbmVyYXRvciBvbmx5IGNhcmVzIGFib3V0IGl0cyBvd24gc2VlZCB2YWx1ZSBhbmQgaXRzIHJhbmRvbSBudW1iZXIgZ2VuZXJhdG9yXHJcbiAgICAgICAgdGhpcy5zZWVkID0gc2VlZDtcclxuICAgICAgICB0aGlzLnJhbmRHZW5lcmF0b3IgPSAoc2VlZCAhPSAnJykgPyBzZWVkcmFuZG9tLmRlZmF1bHQoc2VlZCkgOiBzZWVkcmFuZG9tLmRlZmF1bHQoKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFRoZSBmYWN0b3J5IG1ldGhvZCBvZiB0aGlzIGNsYXNzIHRoYXQgcmV0dXJucyBhIG5ldyBzd29yZFxyXG4gICAgICogaW5zdGFuY2Ugd2l0aCBwcm9jZWR1cmFsbHkgZ2VuZXJhdGVkIGJsYWRlIGdlb21ldHJ5XHJcbiAgICAgKi9cclxuICAgIGdlbmVyYXRlU3dvcmQodGVtcGxhdGUgOiBTd29yZFRlbXBsYXRlLCBnZW5QYXJhbXMgOiBHZW5lcmF0aW9uUGFyYW1ldGVycykgOiBTd29yZCB7XHJcbiAgICAgICAgLy8gQ3JlYXRlIGEgbmV3IHN3b3JkIE9iamVjdFxyXG4gICAgICAgIHZhciBzd29yZCA9IG5ldyBTd29yZCh0ZW1wbGF0ZS5zdHlsZSk7XHJcblxyXG4gICAgICAgIC8vIEdlbmVyYXRlIHRoZSB2ZXJ0aWNlcyBmb3IgZWFjaCBsZXZlbFxyXG4gICAgICAgIHRoaXMuYnVpbGRCbGFkZSh0ZW1wbGF0ZSwgZ2VuUGFyYW1zLCBzd29yZCk7XHJcbiAgICAgICAgdGhpcy5idWlsZEd1YXJkKHRlbXBsYXRlLCBnZW5QYXJhbXMsIHN3b3JkKTtcclxuICAgICAgICB0aGlzLmJ1aWxkSGFuZGxlKHRlbXBsYXRlLCBnZW5QYXJhbXMsIHN3b3JkKTtcclxuICAgICAgICB0aGlzLmJ1aWxkUG9tbWVsKHRlbXBsYXRlLCBnZW5QYXJhbXMsIHN3b3JkKTtcclxuXHJcbiAgICAgICAgLy8gQWRkIGF0dHJpYnV0ZXMgdG8gdGhlIGdlb21ldHJ5LCBhZGQgYSBtYXRlcmlhbCwgYW5kIGJ1aWxkIGEgbWVzaFxyXG4gICAgICAgIHN3b3JkLmdlb21ldHJ5LmFkZEF0dHJpYnV0ZShcInBvc2l0aW9uXCIsIG5ldyBCdWZmZXJBdHRyaWJ1dGUobmV3IEZsb2F0MzJBcnJheShzd29yZC52ZXJ0aWNlcyksIDMpKTtcclxuICAgICAgICBzd29yZC5nZW9tZXRyeS5hZGRBdHRyaWJ1dGUoXCJjb2xvclwiLCBuZXcgQnVmZmVyQXR0cmlidXRlKG5ldyBGbG9hdDMyQXJyYXkoc3dvcmQuY29sb3JzKSwgMykpO1xyXG4gICAgICAgIHN3b3JkLmdlb21ldHJ5LmNvbXB1dGVWZXJ0ZXhOb3JtYWxzKCk7XHJcblxyXG4gICAgICAgIC8vIEJvcnJvd2VkIGZyb206IGh0dHBzOi8vZ2l0aHViLmNvbS9tcmRvb2IvdGhyZWUuanMvYmxvYi9tYXN0ZXIvZXhhbXBsZXMvd2ViZ2xfYnVmZmVyZ2VvbWV0cnlfaW5kZXhlZC5odG1sI0w3MlxyXG4gICAgICAgIHZhciBtYXRlcmlhbCA9IG5ldyBNZXNoUGhvbmdNYXRlcmlhbCh7XHJcbiAgICAgICAgICAgIHNwZWN1bGFyOiAweDExMTExMSwgc2hpbmluZXNzOiAyNTAsXHJcbiAgICAgICAgICAgIHNpZGU6IERvdWJsZVNpZGUsIHZlcnRleENvbG9yczogVmVydGV4Q29sb3JzXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgcmV0dXJuIHN3b3JkO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogUHJvY2VkdXJhbGx5IGdlbmVyYXRlcyBhIHN3b3JkIGJsYWRlIGFuZCBhZGRzIGl0IHRvIHRoZSBzd29yZHMgZ2VvbWV0cnlcclxuICAgICAqIFxyXG4gICAgICovXHJcbiAgICBidWlsZEJsYWRlKHRlbXBsYXRlIDogU3dvcmRUZW1wbGF0ZSwgZ2VuUGFyYW1zIDogR2VuZXJhdGlvblBhcmFtZXRlcnMsIHN3b3JkIDogU3dvcmQpIDogU3dvcmQge1xyXG5cclxuICAgICAgICAvLyBHZXQgdGhlIGRlc2lyZWQgYmxhZGUgbGVuZ3RoXHJcbiAgICAgICAgdmFyIGJsYWRlTGVuZ3RoID0gdGVtcGxhdGUubGVuZ3RoO1xyXG4gICAgICAgIHZhciBmdWxsZXJXaWR0aCA9IGdlblBhcmFtcy5iYXNlV2lkdGggKiBnZW5QYXJhbXMuZnVsbGVyV2lkdGhSYXRpbztcclxuICAgICAgICB2YXIgZnVsbGVyRGVwdGggPSBnZW5QYXJhbXMuYmxhZGVUaGlja25lc3MgLyA0O1xyXG5cclxuICAgICAgICAvLyBEZXRlcm1pbmUgaG93IG1hbnkgZGl2aXNpb25zIGVhY2ggc2VjdGlvbiBoYXNcclxuICAgICAgICB2YXIgbnVtQmFzZURpdnMgPSBnZXRSYW5kb21JbnQodGhpcy5yYW5kR2VuZXJhdG9yLCAxLCBnZW5QYXJhbXMubWF4QmFzZURpdnMgKyAxKTtcclxuICAgICAgICB2YXIgbnVtTWlkRGl2cyA9IGdldFJhbmRvbUludCh0aGlzLnJhbmRHZW5lcmF0b3IsIDEsIGdlblBhcmFtcy5tYXhNaWREaXZzICsgMSk7XHJcbiAgICAgICAgdmFyIG51bVRpcERpdnMgPSBNYXRoLmZsb29yKHRoaXMucmFuZEdlbmVyYXRvcigpICogZ2VuUGFyYW1zLm1heFRpcERpdnMpICsgMTtcclxuICAgICAgICB2YXIgdG90YWxCbGFkZURpdnMgPSBudW1CYXNlRGl2cyArIG51bU1pZERpdnMgKyBudW1UaXBEaXZzO1xyXG5cclxuICAgICAgICAvLyBEZXRlcm1pbmUgaG93IG11Y2ggb2YgdGhlIGJsYWRlIGxlbmd0aCBpcyBhbGxvY2F0ZWQgdG8gZWFjaCBzZWN0aW9uXHJcbiAgICAgICAgdmFyIGJhc2VTZWN0aW9uTGVuZ3RoID0gYmxhZGVMZW5ndGggKiBnZW5QYXJhbXMuYmxhZGVCYXNlUHJvcG9ydGlvbjtcclxuICAgICAgICB2YXIgbWlkU2VjdGlvbkxlbmd0aCA9IGJsYWRlTGVuZ3RoICogZ2VuUGFyYW1zLmJsYWRlTWlkUHJvcG9ydGlvbjtcclxuICAgICAgICB2YXIgdGlwU2VjdGlvbkxlbmd0aCA9IGJsYWRlTGVuZ3RoICogKDEgLSAoZ2VuUGFyYW1zLmJsYWRlQmFzZVByb3BvcnRpb24gKyBnZW5QYXJhbXMuYmxhZGVNaWRQcm9wb3J0aW9uKSk7XHJcblxyXG4gICAgICAgIC8vIENhbGN1bGF0ZSBob3cgbG9uZyBlcXVpdmFsZW50IGRpdmlzaW9ucyBjYW4gYmUgZGVwZW5kaW5nIG9uIHRoZSBzZWN0aW9uXHJcbiAgICAgICAgdmFyIGVxdWFsQmFzZURpdkxlbmd0aCA9IGJhc2VTZWN0aW9uTGVuZ3RoIC8gbnVtQmFzZURpdnM7XHJcbiAgICAgICAgdmFyIGVxdWFsTWlkRGl2TGVuZ3RoID0gbWlkU2VjdGlvbkxlbmd0aCAvIG51bU1pZERpdnM7XHJcbiAgICAgICAgdmFyIGVxdWFsVGlwRGl2TGVuZ3RoID0gdGlwU2VjdGlvbkxlbmd0aCAvIG51bVRpcERpdnM7XHJcblxyXG4gICAgICAgIC8vIENyZWF0ZSB0aGUgYmxhZGUgY3Jvc3Mgc2VjdGlvbiB0byBzdGFydFxyXG4gICAgICAgIHN3b3JkLnZlcnRpY2VzLmNvbmNhdChTd29yZEdlbmVyYXRvci5jcmVhdGVCbGFkZUNyb3NzU2VjdGlvbih0ZW1wbGF0ZS5iYXNlV2lkdGgsIGZ1bGxlckRlcHRoLCBmdWxsZXJXaWR0aCwgZ2VuUGFyYW1zKSk7XHJcblxyXG4gICAgICAgIC8vIEV4dHJ1ZGUgYmxhZGUgY3Jvc3Mtc2VjdGlvbiB0byBmdWxsIGxlbmd0aCB3aXRoIGFsbCB0aGUgZGl2aXNpb25zIHByZXNlbnRcclxuICAgICAgICB2YXIgZ2VuZXJhdGVkR2VvbWV0cnkgOiBWZXJ0aWNlc0FuZFRyaWFuZ2xlcyA9IFN3b3JkR2VuZXJhdG9yLmV4dHJ1ZGVUb3BNdWx0aXBsZShzd29yZC52ZXJ0aWNlcywgbmV3IFZlY3RvcjMoMC4wLCBibGFkZUxlbmd0aC90b3RhbEJsYWRlRGl2cywgMC4wKSwgdG90YWxCbGFkZURpdnMpO1xyXG4gICAgICAgIC8vIEFkZCB0aGUgdmVydGljZXMgYW5kIHRyaWFuZ2xlcyB0byB0aGUgc3dvcmRcclxuICAgICAgICBzd29yZC52ZXJ0aWNlcy5jb25jYXQoZ2VuZXJhdGVkR2VvbWV0cnkudmVydGljZXMpO1xyXG4gICAgICAgIHN3b3JkLnRyaWFuZ2xlcy5jb25jYXQoZ2VuZXJhdGVkR2VvbWV0cnkudHJpYW5nbGVzKTtcclxuXHJcbiAgICAgICAgLy8gTW9kaWZ5IHRoZSB2ZXJ0aWNlcyBhdCBlYWNoIGxldmVsIHRvIGJlIGEgdGhlIGRlc2lyZWQgaGVpZ2h0c1xyXG4gICAgICAgIHZhciB2ZXJ0SW5kaWNlc0luTGF5ZXJzIDogbnVtYmVyW11bXT0gU3dvcmRHZW5lcmF0b3IuZ2V0QWxsVmVydHNJbmRpY2VzQXNMYXllcnMoc3dvcmQudmVydGljZXMsIHRvdGFsQmxhZGVEaXZzLCBibGFkZUxlbmd0aCk7XHJcblxyXG4gICAgICAgIHZhciBiYXNlU3BhY2VMZWZ0ID0gYmFzZVNlY3Rpb25MZW5ndGg7XHJcbiAgICAgICAgdmFyIG1pZFNwYWNlTGVmdCA9IG1pZFNlY3Rpb25MZW5ndGg7XHJcbiAgICAgICAgdmFyIHRpcFNwYWNlTGVmdCA9IHRpcFNlY3Rpb25MZW5ndGg7XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gTW9kaWZ5IHRoZSBlZGdlcyB0byBtYWtlIHRoZSBibGFkZSBsb29rIHVuaXF1ZVxyXG4gICAgICAgIHZhciBsZWZ0RWRnZVZlcnRJbmRpY2VzOiBudW1iZXJbXSA9IFN3b3JkR2VuZXJhdG9yLmdldExlZnRFZGdlVmVydEluZGljZXMoc3dvcmQudmVydGljZXMsIHRlbXBsYXRlLmJhc2VXaWR0aCk7XHJcbiAgICAgICAgdmFyIHJpZ2h0RWRnZVZlcnRJbmRpY2VzOiBudW1iZXJbXSA9IFN3b3JkR2VuZXJhdG9yLmdldFJpZ2h0RWRnZVZlcnRJbmRpY2VzKHN3b3JkLnZlcnRpY2VzLCB0ZW1wbGF0ZS5iYXNlV2lkdGgpO1xyXG4gICAgICAgIHN3b3JkLnZlcnRpY2VzID0gU3dvcmRHZW5lcmF0b3IubW9kaWZ5RWRnZVdpZHRoKHRoaXMsIHN3b3JkLnZlcnRpY2VzLCBsZWZ0RWRnZVZlcnRJbmRpY2VzLCByaWdodEVkZ2VWZXJ0SW5kaWNlcywgdGVtcGxhdGUuYmFzZVdpZHRoLCBnZW5QYXJhbXMuYmxhZGVXaWR0aFRvbGVyYW5jZVJhdGlvKTtcclxuICAgICAgICBcclxuICAgICAgICAvLyBQbGFjZSBhIHBvaW50IGF0IHRoZSB0aXAgb2YgdGhlIGJsYWRlXHJcbiAgICAgICAgdmFyIHRvcEZhY2VWZXJ0SW5kaWNlczogbnVtYmVyW10gPSBTd29yZEdlbmVyYXRvci5nZXRUb3BWZXJ0SW5kaWNlcyhzd29yZC52ZXJ0aWNlcyk7XHJcbiAgICAgICAgc3dvcmQudmVydGljZXMgPSBTd29yZEdlbmVyYXRvci5jcmVhdGVCbGFkZVRpcChzd29yZC52ZXJ0aWNlcywgdG9wRmFjZVZlcnRJbmRpY2VzKTtcclxuXHJcbiAgICAgICAgXHJcbiAgICAgICAgdmFyIG51bVZlcnRpY2VzID0gMDtcclxuXHJcbiAgICAgICAgLy8gRG91YmxlIGNoZWNrIHRoYXQgd2UgaGF2ZSB0aGUgcHJvcGVyIG51bWJlciBvZiB2ZXJ0aWNlc1xyXG4gICAgICAgIGlmIChzd29yZC52ZXJ0aWNlcy5sZW5ndGggJSAzID09IDApIHtcclxuICAgICAgICAgICAgbnVtVmVydGljZXMgPSBzd29yZC52ZXJ0aWNlcy5sZW5ndGggIC8gMztcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHRocm93IFwiSW5jb3JyZWN0IG51bWJlciBvZiB2ZXJ0ZXggdmFsdWVzXCJcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIE1vZGlmeSB0aGUgY29sb3JzIG9mIHRoZSBibGFkZSBnZW9tZXRyeVxyXG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbnVtVmVydGljZXM7IGkrKykge1xyXG4gICAgICAgICAgICBzd29yZC5jb2xvcnMucHVzaCgyMDApO1xyXG4gICAgICAgICAgICBzd29yZC5jb2xvcnMucHVzaCgyMDApO1xyXG4gICAgICAgICAgICBzd29yZC5jb2xvcnMucHVzaCgyMDApO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIHN3b3JkO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQ3JlYXRlcyBhIGJveC1zaGFwcGVkIGd1YXJkIGFuZCBtZXJnZXMgaXQgd2l0aCB0aGUgc3dvcmRzIGdlb21ldHJ5LlxyXG4gICAgICogR2l2ZW46IFRoZSBnZW9tZXRyeSBvZiB0aGUgc3dvcmQsIGFuZCBzb21lIHBhcmFtZXRlcnMgYWJvdXRcclxuICAgICAqICAgICAgICB0aGUgZ2VvbWV0cnkgb2YgdGhlIHN3b3JkXHJcbiAgICAgKiBSZXR1cm5zOiBUaGUgU3dvcmRcclxuICAgICAqL1xyXG4gICAgYnVpbGRHdWFyZCh0ZW1wbGF0ZSA6IFN3b3JkVGVtcGxhdGUsIGdlblBhcmFtcyA6IEdlbmVyYXRpb25QYXJhbWV0ZXJzLFxyXG4gICAgICAgIHN3b3JkIDogU3dvcmQsXHJcbiAgICAgICAgYmxhZGVXaWR0aCA6IG51bWJlciA9IDAuMyxcclxuICAgICAgICBibGFkZXRoaWNrbmVzcyA6IG51bWJlciA9IDAuMywgXHJcbiAgICAgICAgZ3VhcmRUaGlja25lc3MgOiBudW1iZXIgPSAxLjAsIFxyXG4gICAgICAgIGd1YXJkQmxhZGVSYXRpbyA6IG51bWJlciA9IDQuMCkgOiBTd29yZCB7XHJcblxyXG4gICAgICAgIC8vIENyZWF0ZSBhIHNpbXBsZSBib3hcclxuICAgICAgICB2YXIgZ3VhcmRHZW9tZXRyeSA9IG5ldyBCb3hHZW9tZXRyeSggZ3VhcmRCbGFkZVJhdGlvICogYmxhZGVXaWR0aCwgLjIsIGd1YXJkVGhpY2tuZXNzKTtcclxuXHJcbiAgICAgICAgLy8gQ29udmVydCB0aGUgYm94IHRvIGEgYnVmZmVyIGdlb21ldHJ5XHJcbiAgICAgICAgdmFyIGd1YXJkQnVmZmVyR2VvbWV0cnkgPSBuZXcgQnVmZmVyR2VvbWV0cnkoKS5mcm9tR2VvbWV0cnkoZ3VhcmRHZW9tZXRyeSk7XHJcblxyXG4gICAgICAgIC8vIEFwcGVuZCB0aGUgdmVydGljZXMgdG8gdGhlIHN3b3JkcyB2ZXJ0ZXggYXJyYXkgYW5kIGFkZCB0aGVpciBpbmRpY2VzIHRvIHRoZSB2ZXJ0ZXggaW5kaWNlcyBhcnJheVxyXG4gICAgICAgIHZhciB2ZXJ0aWNlcyA9IGd1YXJkQnVmZmVyR2VvbWV0cnkuZ2V0QXR0cmlidXRlKFwicG9zaXRpb25cIik7IFxyXG4gICAgICAgIC8vIExvb3AgdGhyb3VnaCBhbGwgb2YgdGhlIHBvc2l0aW9uIGF0dHJpYnV0ZXMgYW5kIGFkZCB0aGUgWFlaIHZhbHVlcyB0byB0aGUgc3dvcmRzIGdlb21ldHJ5XHJcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB2ZXJ0aWNlcy5jb3VudDsgaSsrKSB7XHJcbiAgICAgICAgICAgIHN3b3JkLnZlcnRpY2VzLnB1c2godmVydGljZXMuZ2V0WChpKSk7XHJcbiAgICAgICAgICAgIHN3b3JkLnZlcnRpY2VzLnB1c2godmVydGljZXMuZ2V0WShpKSk7XHJcbiAgICAgICAgICAgIHN3b3JkLnZlcnRpY2VzLnB1c2godmVydGljZXMuZ2V0WihpKSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBBcHBlbmQgdGhlIHZlcnRpY2VzIHRvIHRoZSBzd29yZHMgdmVydGV4IGFycmF5IGFuZCBhZGQgdGhlaXIgaW5kaWNlcyB0byB0aGUgdmVydGV4IGluZGljZXMgYXJyYXlcclxuICAgICAgICB2YXIgdmVydGljZXMgPSBndWFyZEJ1ZmZlckdlb21ldHJ5LmdldEF0dHJpYnV0ZShcIlwiKTsgXHJcbiAgICAgICAgLy8gTG9vcCB0aHJvdWdoIGFsbCBvZiB0aGUgcG9zaXRpb24gYXR0cmlidXRlcyBhbmQgYWRkIHRoZSBYWVogdmFsdWVzIHRvIHRoZSBzd29yZHMgZ2VvbWV0cnlcclxuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHZlcnRpY2VzLmNvdW50OyBpKyspIHtcclxuICAgICAgICAgICAgc3dvcmQudmVydGljZXMucHVzaCh2ZXJ0aWNlcy5nZXRYKGkpKTtcclxuICAgICAgICAgICAgc3dvcmQudmVydGljZXMucHVzaCh2ZXJ0aWNlcy5nZXRZKGkpKTtcclxuICAgICAgICAgICAgc3dvcmQudmVydGljZXMucHVzaCh2ZXJ0aWNlcy5nZXRaKGkpKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIEFkZCBhIGNvbG9yIGZvciBlYWNoIHZlcnRleCAoQnJvd24pXHJcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB2ZXJ0aWNlcy5jb3VudDsgaSsrKSB7XHJcbiAgICAgICAgICAgIHN3b3JkLmNvbG9ycy5wdXNoKDExMik7XHJcbiAgICAgICAgICAgIHN3b3JkLmNvbG9ycy5wdXNoKDgyKTtcclxuICAgICAgICAgICAgc3dvcmQuY29sb3JzLnB1c2goMCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB2YXIgdHJpYW5nbGVzID0gZ3VhcmRCdWZmZXJHZW9tZXRyeS5nZXRJbmRleCgpO1xyXG4gICAgICAgIC8vIExvb3AgdGhyb3VnaCBhbGwgb2YgdGhlIHRyaWFuZ2xlcyBhbmQgYWRkIHRoZSB2YWx1ZXMgdG8gdGhlIHN3b3JkcyBnZW9tZXRyeVxyXG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdHJpYW5nbGVzLmNvdW50OyBpKyspIHtcclxuICAgICAgICAgICAgc3dvcmQudmVydGljZXMucHVzaCh2ZXJ0aWNlcy5nZXRYKGkpKTtcclxuICAgICAgICAgICAgc3dvcmQudmVydGljZXMucHVzaCh2ZXJ0aWNlcy5nZXRZKGkpKTtcclxuICAgICAgICAgICAgc3dvcmQudmVydGljZXMucHVzaCh2ZXJ0aWNlcy5nZXRaKGkpKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiBzd29yZDtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIENyZWF0ZXMgYSBjeWxpbmRyaWNhbCBoYW5kbGUgYW5kIG1lcmdlcyBpdCB3aXRoIHRoZSBzd29yZHMgZ2VvbWV0cnkuXHJcbiAgICAgKiBHaXZlbjogdGhlIGdlb21ldHJ5IG9mIHRoZSBzd29yZCwgYW5kIHNvbWUgcGFyYW1ldGVycyBhYm91dFxyXG4gICAgICogICAgICAgIHRoZSBnZW9tZXRyeSBvZiB0aGUgc3dvcmRcclxuICAgICAqIFJldHVybnM6IFRoZSBTd29yZFxyXG4gICAgICovXHJcbiAgICBidWlsZEhhbmRsZSh0ZW1wbGF0ZSA6IFN3b3JkVGVtcGxhdGUsIGdlblBhcmFtcyA6IEdlbmVyYXRpb25QYXJhbWV0ZXJzLCBzd29yZDogU3dvcmQsIGhhbmRsZUxlbmd0aCA9IDEuMzUsIGhhbmRsZVdpZHRoID0gMC4xLCBudW1IYW5kcyA9IDEpIHtcclxuICAgICAgICAvLyBDcmVhdGUgYSBzaW1wbGUgY3lsaW5kZXJcclxuICAgICAgICB2YXIgaGFuZGxlR2VvbWV0cnkgPSBuZXcgQ3lsaW5kZXJHZW9tZXRyeSggaGFuZGxlV2lkdGgsIGhhbmRsZVdpZHRoLCBoYW5kbGVMZW5ndGgsIDgpO1xyXG5cclxuICAgICAgICAvLyBNb3ZlcyB0cmFuc2xhdGVzIHRoZSBoYW5kbGUgdG8gZmFsbCBiZWxvdyB0aGUgZ3VhcmQgYW5kIGJsYWRlXHJcbiAgICAgICAgaGFuZGxlR2VvbWV0cnkudHJhbnNsYXRlKDAsLWhhbmRsZUxlbmd0aCAvIDIsMCk7XHJcblxyXG4gICAgICAgIC8vIENvbnZlcnQgdGhlIGJveCB0byBhIGJ1ZmZlciBnZW9tZXRyeVxyXG4gICAgICAgIHZhciBoYW5kbGVCdWZmZXJHZW9tZXRyeSA9IG5ldyBCdWZmZXJHZW9tZXRyeSgpLmZyb21HZW9tZXRyeShoYW5kbGVHZW9tZXRyeSk7XHJcblxyXG4gICAgICAgIC8vIEFwcGVuZCB0aGUgdmVydGljZXMgdG8gdGhlIHN3b3JkcyB2ZXJ0ZXggYXJyYXkgYW5kIGFkZCB0aGVpciBpbmRpY2VzIHRvIHRoZSB2ZXJ0ZXggaW5kaWNlcyBhcnJheVxyXG4gICAgICAgIHZhciB2ZXJ0aWNlcyA9IGhhbmRsZUJ1ZmZlckdlb21ldHJ5LmdldEF0dHJpYnV0ZShcInBvc2l0aW9uXCIpOyBcclxuICAgICAgICAvLyBMb29wIHRocm91Z2ggYWxsIG9mIHRoZSBwb3NpdGlvbiBhdHRyaWJ1dGVzIGFuZCBhZGQgdGhlIFhZWiB2YWx1ZXMgdG8gdGhlIHN3b3JkcyBnZW9tZXRyeVxyXG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdmVydGljZXMuY291bnQ7IGkrKykge1xyXG4gICAgICAgICAgICBzd29yZC52ZXJ0aWNlcy5wdXNoKHZlcnRpY2VzLmdldFgoaSkpO1xyXG4gICAgICAgICAgICBzd29yZC52ZXJ0aWNlcy5wdXNoKHZlcnRpY2VzLmdldFkoaSkpO1xyXG4gICAgICAgICAgICBzd29yZC52ZXJ0aWNlcy5wdXNoKHZlcnRpY2VzLmdldFooaSkpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gQXBwZW5kIHRoZSB2ZXJ0aWNlcyB0byB0aGUgc3dvcmRzIHZlcnRleCBhcnJheSBhbmQgYWRkIHRoZWlyIGluZGljZXMgdG8gdGhlIHZlcnRleCBpbmRpY2VzIGFycmF5XHJcbiAgICAgICAgdmFyIHZlcnRpY2VzID0gaGFuZGxlQnVmZmVyR2VvbWV0cnkuZ2V0QXR0cmlidXRlKFwiXCIpOyBcclxuICAgICAgICAvLyBMb29wIHRocm91Z2ggYWxsIG9mIHRoZSBwb3NpdGlvbiBhdHRyaWJ1dGVzIGFuZCBhZGQgdGhlIFhZWiB2YWx1ZXMgdG8gdGhlIHN3b3JkcyBnZW9tZXRyeVxyXG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdmVydGljZXMuY291bnQ7IGkrKykge1xyXG4gICAgICAgICAgICBzd29yZC52ZXJ0aWNlcy5wdXNoKHZlcnRpY2VzLmdldFgoaSkpO1xyXG4gICAgICAgICAgICBzd29yZC52ZXJ0aWNlcy5wdXNoKHZlcnRpY2VzLmdldFkoaSkpO1xyXG4gICAgICAgICAgICBzd29yZC52ZXJ0aWNlcy5wdXNoKHZlcnRpY2VzLmdldFooaSkpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gQWRkIGEgY29sb3IgZm9yIGVhY2ggdmVydGV4IChCcm93bilcclxuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHZlcnRpY2VzLmNvdW50OyBpKyspIHtcclxuICAgICAgICAgICAgc3dvcmQuY29sb3JzLnB1c2goMTEyKTtcclxuICAgICAgICAgICAgc3dvcmQuY29sb3JzLnB1c2goODIpO1xyXG4gICAgICAgICAgICBzd29yZC5jb2xvcnMucHVzaCgwKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHZhciB0cmlhbmdsZXMgPSBoYW5kbGVCdWZmZXJHZW9tZXRyeS5nZXRJbmRleCgpO1xyXG4gICAgICAgIC8vIExvb3AgdGhyb3VnaCBhbGwgb2YgdGhlIHRyaWFuZ2xlcyBhbmQgYWRkIHRoZSB2YWx1ZXMgdG8gdGhlIHN3b3JkcyBnZW9tZXRyeVxyXG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdHJpYW5nbGVzLmNvdW50OyBpKyspIHtcclxuICAgICAgICAgICAgc3dvcmQudmVydGljZXMucHVzaCh2ZXJ0aWNlcy5nZXRYKGkpKTtcclxuICAgICAgICAgICAgc3dvcmQudmVydGljZXMucHVzaCh2ZXJ0aWNlcy5nZXRZKGkpKTtcclxuICAgICAgICAgICAgc3dvcmQudmVydGljZXMucHVzaCh2ZXJ0aWNlcy5nZXRaKGkpKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiBzd29yZDtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIENyZWF0ZXMgYSBzcGhlcmljYWwgcG9tbWVsIGFuZCBtZXJnZXMgaXQgd2l0aCB0aGUgc3dvcmRzIGdlb21ldHJ5LlxyXG4gICAgICogR2l2ZW46IHRoZSBnZW9tZXRyeSBvZiB0aGUgc3dvcmQsIGFuZCBzb21lIHBhcmFtZXRlcnMgYWJvdXRcclxuICAgICAqICAgICAgICB0aGUgZ2VvbWV0cnkgb2YgdGhlIHN3b3JkXHJcbiAgICAgKiBSZXR1cm5zOiBUaGUgU3dvcmRcclxuICAgICAqL1xyXG4gICAgYnVpbGRQb21tZWwodGVtcGxhdGUgOiBTd29yZFRlbXBsYXRlLCBnZW5QYXJhbXMgOiBHZW5lcmF0aW9uUGFyYW1ldGVycywgc3dvcmQ6IFN3b3JkLCBibGFkZVdpZHRoPTAuNiwgaGFuZGxlTGVuZ3RoID0gMS4zNSwgcG9tbWVsQmxhZGVXaWR0aFJhdGlvID0gMC41MCkgOiBTd29yZCB7XHJcbiAgICAgICAgdmFyIHBvbW1lbFdpZHRoID0gcG9tbWVsQmxhZGVXaWR0aFJhdGlvICogYmxhZGVXaWR0aDtcclxuICAgICAgICB2YXIgcG9tbWVsR2VvbWV0cnkgPSBuZXcgU3BoZXJlR2VvbWV0cnkocG9tbWVsV2lkdGgsIDUsIDQpO1xyXG4gICAgICAgIC8vIFRyYW5zbGF0ZXMgdGhlIHBvbW1lbCB0byBmYWxsIGJlbG93IHRoZSBoYW5kbGVcclxuICAgICAgICBwb21tZWxHZW9tZXRyeS50cmFuc2xhdGUoMCwtaGFuZGxlTGVuZ3RoLDApO1xyXG5cclxuICAgICAgICAvLyBDb252ZXJ0IHRoZSBib3ggdG8gYSBidWZmZXIgZ2VvbWV0cnlcclxuICAgICAgICB2YXIgcG9tbWVsQnVmZmVyR2VvbWV0cnkgPSBuZXcgQnVmZmVyR2VvbWV0cnkoKS5mcm9tR2VvbWV0cnkocG9tbWVsR2VvbWV0cnkpO1xyXG5cclxuICAgICAgICAvLyBBcHBlbmQgdGhlIHZlcnRpY2VzIHRvIHRoZSBzd29yZHMgdmVydGV4IGFycmF5IGFuZCBhZGQgdGhlaXIgaW5kaWNlcyB0byB0aGUgdmVydGV4IGluZGljZXMgYXJyYXlcclxuICAgICAgICB2YXIgdmVydGljZXMgPSBwb21tZWxCdWZmZXJHZW9tZXRyeS5nZXRBdHRyaWJ1dGUoXCJwb3NpdGlvblwiKTsgXHJcbiAgICAgICAgLy8gTG9vcCB0aHJvdWdoIGFsbCBvZiB0aGUgcG9zaXRpb24gYXR0cmlidXRlcyBhbmQgYWRkIHRoZSBYWVogdmFsdWVzIHRvIHRoZSBzd29yZHMgZ2VvbWV0cnlcclxuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHZlcnRpY2VzLmNvdW50OyBpKyspIHtcclxuICAgICAgICAgICAgc3dvcmQudmVydGljZXMucHVzaCh2ZXJ0aWNlcy5nZXRYKGkpKTtcclxuICAgICAgICAgICAgc3dvcmQudmVydGljZXMucHVzaCh2ZXJ0aWNlcy5nZXRZKGkpKTtcclxuICAgICAgICAgICAgc3dvcmQudmVydGljZXMucHVzaCh2ZXJ0aWNlcy5nZXRaKGkpKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIEFwcGVuZCB0aGUgdmVydGljZXMgdG8gdGhlIHN3b3JkcyB2ZXJ0ZXggYXJyYXkgYW5kIGFkZCB0aGVpciBpbmRpY2VzIHRvIHRoZSB2ZXJ0ZXggaW5kaWNlcyBhcnJheVxyXG4gICAgICAgIHZhciB2ZXJ0aWNlcyA9IHBvbW1lbEJ1ZmZlckdlb21ldHJ5LmdldEF0dHJpYnV0ZShcIlwiKTsgXHJcbiAgICAgICAgLy8gTG9vcCB0aHJvdWdoIGFsbCBvZiB0aGUgcG9zaXRpb24gYXR0cmlidXRlcyBhbmQgYWRkIHRoZSBYWVogdmFsdWVzIHRvIHRoZSBzd29yZHMgZ2VvbWV0cnlcclxuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHZlcnRpY2VzLmNvdW50OyBpKyspIHtcclxuICAgICAgICAgICAgc3dvcmQudmVydGljZXMucHVzaCh2ZXJ0aWNlcy5nZXRYKGkpKTtcclxuICAgICAgICAgICAgc3dvcmQudmVydGljZXMucHVzaCh2ZXJ0aWNlcy5nZXRZKGkpKTtcclxuICAgICAgICAgICAgc3dvcmQudmVydGljZXMucHVzaCh2ZXJ0aWNlcy5nZXRaKGkpKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIEFkZCBhIGNvbG9yIGZvciBlYWNoIHZlcnRleCAoR29sZClcclxuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHZlcnRpY2VzLmNvdW50OyBpKyspIHtcclxuICAgICAgICAgICAgc3dvcmQuY29sb3JzLnB1c2goMjI1KTtcclxuICAgICAgICAgICAgc3dvcmQuY29sb3JzLnB1c2goMjAwKTtcclxuICAgICAgICAgICAgc3dvcmQuY29sb3JzLnB1c2goOTApO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdmFyIHRyaWFuZ2xlcyA9IHBvbW1lbEJ1ZmZlckdlb21ldHJ5LmdldEluZGV4KCk7XHJcbiAgICAgICAgLy8gTG9vcCB0aHJvdWdoIGFsbCBvZiB0aGUgdHJpYW5nbGVzIGFuZCBhZGQgdGhlIHZhbHVlcyB0byB0aGUgc3dvcmRzIGdlb21ldHJ5XHJcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0cmlhbmdsZXMuY291bnQ7IGkrKykge1xyXG4gICAgICAgICAgICBzd29yZC52ZXJ0aWNlcy5wdXNoKHZlcnRpY2VzLmdldFgoaSkpO1xyXG4gICAgICAgICAgICBzd29yZC52ZXJ0aWNlcy5wdXNoKHZlcnRpY2VzLmdldFkoaSkpO1xyXG4gICAgICAgICAgICBzd29yZC52ZXJ0aWNlcy5wdXNoKHZlcnRpY2VzLmdldFooaSkpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIHN3b3JkO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQ3JlYXRlcyBhIGNyb3NzIHNlY3Rpb24gb2YgdGhlIGJsYWRlIG91dCBvZiB2ZXJ0aWNlc1xyXG4gICAgICogR2l2ZW46IFRoZSB3aWR0aCBvZiB0aGUgYmxhZGUsIGRlcHRoIG9mIHRoZSBmdWxsZXIsIGZ1bGxlciB3aWR0aCwgYW5kIG90aGVyIHBhcmFtZXRlcnNcclxuICAgICAqIFJldHVybnM6IFRoZSB2ZXJ0aWNlcyBvdXRsaW5laW5nIHRoZSBzdGFydGluZyBjcm9zcyBzZWN0aW9uIG9mIHRoZSBibGFkZVxyXG4gICAgICogIyMgTm90ZTogQXQgdGhlIG1vbWVudCBhbGwgY3Jvc3Mgc2VjdGlvbnMgYXJlIGNyZWF0ZWQgdXNpbmcgOCB2ZXJ0aWNlc1xyXG4gICAgICovXHJcbiAgICBzdGF0aWMgY3JlYXRlQmxhZGVDcm9zc1NlY3Rpb24oYmxhZGVXaWR0aCA6IG51bWJlciwgZnVsbGVyRGVwdGggOiBudW1iZXIsIGZ1bGxlcldpZHRoIDogbnVtYmVyLCBnZW5QYXJhbXMgOiBHZW5lcmF0aW9uUGFyYW1ldGVycykgOiBudW1iZXJbXSB7XHJcbiAgICAgICAgdmFyIHZlcnRpY2VzID0gW107XHJcblxyXG4gICAgICAgIC8vIEJhY2sgc2lkZSBvZiB0aGUgY3Jvc3Mtc2VjdGlvblxyXG4gICAgICAgIHZlcnRpY2VzLnB1c2goYmxhZGVXaWR0aCAvIC0yLjApO1xyXG4gICAgICAgIHZlcnRpY2VzLnB1c2goMC4wKTtcclxuICAgICAgICB2ZXJ0aWNlcy5wdXNoKDAuMCk7XHJcblxyXG4gICAgICAgIHZlcnRpY2VzLnB1c2goZnVsbGVyV2lkdGggLyAtMi4wKTtcclxuICAgICAgICB2ZXJ0aWNlcy5wdXNoKDAuMCk7XHJcbiAgICAgICAgdmVydGljZXMucHVzaChnZW5QYXJhbXMuYmxhZGVUaGlja25lc3MgLyAyLjApO1xyXG5cclxuICAgICAgICBpZiAoZ2VuUGFyYW1zLmFwcGx5RnVsbGVyKSB7XHJcbiAgICAgICAgICAgIHZlcnRpY2VzLnB1c2goMC4wKTtcclxuICAgICAgICAgICAgdmVydGljZXMucHVzaCgwLjApO1xyXG4gICAgICAgICAgICB2ZXJ0aWNlcy5wdXNoKChnZW5QYXJhbXMuYmxhZGVUaGlja25lc3MgLyAtMi4wKSArIGZ1bGxlckRlcHRoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHZlcnRpY2VzLnB1c2goMC4wKTtcclxuICAgICAgICAgICAgdmVydGljZXMucHVzaCgwLjApO1xyXG4gICAgICAgICAgICB2ZXJ0aWNlcy5wdXNoKGdlblBhcmFtcy5ibGFkZVRoaWNrbmVzcyAvIC0yLjApO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdmVydGljZXMucHVzaChmdWxsZXJXaWR0aCAvIDIuMCk7XHJcbiAgICAgICAgdmVydGljZXMucHVzaCgwLjApO1xyXG4gICAgICAgIHZlcnRpY2VzLnB1c2goZ2VuUGFyYW1zLmJsYWRlVGhpY2tuZXNzIC8gLTIuMCk7XHJcblxyXG4gICAgICAgIHZlcnRpY2VzLnB1c2goYmxhZGVXaWR0aCAvIDIuMCk7XHJcbiAgICAgICAgdmVydGljZXMucHVzaCgwLjApO1xyXG4gICAgICAgIHZlcnRpY2VzLnB1c2goMC4wKTtcclxuXHJcbiAgICAgICAgLy8gRnJvbnQgc2lkZSBvZiBjcm9zcy1zZWN0aW9uXHJcbiAgICAgICAgdmVydGljZXMucHVzaChmdWxsZXJXaWR0aCAvIDIuMCk7XHJcbiAgICAgICAgdmVydGljZXMucHVzaCgwLjApO1xyXG4gICAgICAgIHZlcnRpY2VzLnB1c2goZ2VuUGFyYW1zLmJsYWRlVGhpY2tuZXNzIC8gMi4wKTtcclxuXHJcbiAgICAgICAgaWYgKGdlblBhcmFtcy5hcHBseUZ1bGxlcikge1xyXG4gICAgICAgICAgICB2ZXJ0aWNlcy5wdXNoKDAuMCk7XHJcbiAgICAgICAgICAgIHZlcnRpY2VzLnB1c2goMC4wKTtcclxuICAgICAgICAgICAgdmVydGljZXMucHVzaCgoZ2VuUGFyYW1zLmJsYWRlVGhpY2tuZXNzIC8gMi4wKSAtIGZ1bGxlckRlcHRoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHZlcnRpY2VzLnB1c2goMC4wKTtcclxuICAgICAgICAgICAgdmVydGljZXMucHVzaCgwLjApO1xyXG4gICAgICAgICAgICB2ZXJ0aWNlcy5wdXNoKGdlblBhcmFtcy5ibGFkZVRoaWNrbmVzcyAvIDIuMCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB2ZXJ0aWNlcy5wdXNoKGZ1bGxlcldpZHRoIC8gLTIuMCk7XHJcbiAgICAgICAgdmVydGljZXMucHVzaCgwLjApO1xyXG4gICAgICAgIHZlcnRpY2VzLnB1c2goZ2VuUGFyYW1zLmJsYWRlVGhpY2tuZXNzIC8gMi4wKTtcclxuXHJcbiAgICAgICAgcmV0dXJuIHZlcnRpY2VzO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogRXh0cnVkZXMgYSBnZW9tZXRyeSBieSBpbiBhIGdpdmVuIGRpcmVjdGlvbiBuLW51bWJlciBvZlxyXG4gICAgICogdGltZXMgKFdoZXJlIG4gPSBudW1SZXBlYXQpIGFuZCByZXR1cm5zIHRoZSB2ZXJ0cyBhdCB0aGVcclxuICAgICAqIHRvcCBvZiB0aGUgZ2VvbWV0cnlcclxuICAgICAqIEdpdmVuOiBBbGwgdGhlIHZlcnRpY2VzIGluIHRoZSBtb2RlbCwgYW5kIGEgZGlyZWN0aW9uIHRvIGV4dHJ1ZGUgaW4sIGFuZCBhIG51bWJlciBvZiB0aW1lcyB0byBleHRydWRlXHJcbiAgICAgKiBSZXR1cm5zOiBUaGUgbmV3IHZlcnRpY2VzIGFuZCB0aGUgdHJpYW5nbGVzIGNyZWF0ZWQgZHVyaW5nIGV4dHJ1c2lvblxyXG4gICAgICovXHJcbiAgICBzdGF0aWMgZXh0cnVkZVRvcE11bHRpcGxlKHZlcnRpY2VzOiBudW1iZXJbXSwgZGlyZWN0aW9uIDogVmVjdG9yMywgbnVtUmVwZWF0IDogbnVtYmVyKSA6IFZlcnRpY2VzQW5kVHJpYW5nbGVzIHtcclxuXHJcbiAgICAgICAgdmFyIGdlbmVyYXRlZEdlb21ldHJ5IDogVmVydGljZXNBbmRUcmlhbmdsZXM7XHJcbiAgICAgICAgdmFyIGJ1ZmZlcmVkVmVydGljZXMgPSB2ZXJ0aWNlcy5zbGljZSgpO1xyXG4gICAgICAgIHZhciBidWZmZXJlZFRyaWFuZ2xlcyA6IG51bWJlcltdID0gW107XHJcblxyXG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbnVtUmVwZWF0OyBpKyspIHtcclxuICAgICAgICAgICAgZ2VuZXJhdGVkR2VvbWV0cnkgPSBTd29yZEdlbmVyYXRvci5leHRydWRlVG9wKGJ1ZmZlcmVkVmVydGljZXMsIGRpcmVjdGlvbik7XHJcbiAgICAgICAgICAgIGJ1ZmZlcmVkVmVydGljZXMuY29uY2F0KGdlbmVyYXRlZEdlb21ldHJ5LnZlcnRpY2VzKTtcclxuICAgICAgICAgICAgYnVmZmVyZWRUcmlhbmdsZXMuY29uY2F0KGdlbmVyYXRlZEdlb21ldHJ5LnRyaWFuZ2xlcyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4geyB2ZXJ0aWNlczogYnVmZmVyZWRWZXJ0aWNlcywgdHJpYW5nbGVzOiBidWZmZXJlZFRyaWFuZ2xlcyB9O1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogRXh0cnVkZXMgYSBnZW9tZXRyeSwgZnJvbSB0aGUgdG9wLCBpbiBhIGdpdmVuIGRpcmVjdGlvblxyXG4gICAgICogR2l2ZW46IEFsbCB0aGUgdmVydGljZXMgaW4gdGhlIG1vZGVsLCBhbmQgYSBkaXJlY3Rpb24gdG8gZXh0cnVkZSBpblxyXG4gICAgICogUmV0dXJuczogVGhlIG5ldyB2ZXJ0aWNlcyBhbmQgdGhlIHRyaWFuZ2xlcyBjcmVhdGVkIGR1cmluZyBleHRydXNpb25cclxuICAgICAqICMjIE5vdGU6IEFzc3VtZXMgdGhhdCB0aGUgdG9wIGlzIGEgZmxhdCwgaG9yaXpvbnRhbCBmYWNlXHJcbiAgICAgKi9cclxuICAgIHN0YXRpYyBleHRydWRlVG9wKHZlcnRpY2VzOiBudW1iZXJbXSwgZGlyZWN0aW9uIDogVmVjdG9yMykgOiBWZXJ0aWNlc0FuZFRyaWFuZ2xlcyB7XHJcblxyXG4gICAgICAgIHZhciB0b3BWZXJ0SW5kaWNlcyA6IG51bWJlcltdID0gU3dvcmRHZW5lcmF0b3IuZ2V0VG9wVmVydEluZGljZXModmVydGljZXMpO1xyXG5cclxuICAgICAgICB2YXIgZXh0cnVkZWRHZW9tIDogVmVydGljZXNBbmRUcmlhbmdsZXMgPSBTd29yZEdlbmVyYXRvci5leHRydWRlRmFjZSh2ZXJ0aWNlcywgdG9wVmVydEluZGljZXMsIGRpcmVjdGlvbik7XHJcblxyXG4gICAgICAgIHJldHVybiBleHRydWRlZEdlb207XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBFeHRydWRlcyB0aGUgZmFjZSBvZiBhIGdlb21ldHJ5IGluIGEgc3BlY2lmaWVkIGRpcmVjdGlvblxyXG4gICAgICogR2l2ZW46IEFsbCB0aGUgdmVydGljZXMgaW4gdGhlIG1vZGVsLCB0aGUgaW5kaWNlcyB0byBleHRydWRlLCBhbmQgdGhlIGRpcmVjdGlvbiB0byBleHRydWRlIGluXHJcbiAgICAgKiBSZXR1cm5zOiBUaGUgbmV3IHZlcnRpY2VzIGFuZCB0aGUgdHJpYW5nbGVzIGNyZWF0ZWQgZHVyaW5nIGV4dHJ1c2lvblxyXG4gICAgICovXHJcbiAgICBzdGF0aWMgZXh0cnVkZUZhY2UodmVydGljZXM6IG51bWJlcltdLCBmYWNlSW5kaWNlcyA6IG51bWJlcltdLCAgZGlyZWN0aW9uIDogVmVjdG9yMykgOiBWZXJ0aWNlc0FuZFRyaWFuZ2xlcyB7XHJcblxyXG4gICAgICAgIGlmIChmYWNlSW5kaWNlcy5sZW5ndGggPT0gMCkge1xyXG4gICAgICAgICAgICB0aHJvdyBcIk5vIHZlcnRpY2VzIGdpdmVuIHRvIGV4dHJ1ZGVcIjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIENyZWF0ZSB0aGUgbmV3IHZlcnRpY2VzXHJcbiAgICAgICAgdmFyIG51bVZlcnRpY2VzID0gMDtcclxuXHJcbiAgICAgICAgLy8gRG91YmxlIGNoZWNrIHRoYXQgd2UgaGF2ZSB0aGUgcHJvcGVyIG51bWJlciBvZiB2ZXJ0aWNlc1xyXG4gICAgICAgIGlmICh2ZXJ0aWNlcy5sZW5ndGggJSAzID09IDApIHtcclxuICAgICAgICAgICAgbnVtVmVydGljZXMgPSB2ZXJ0aWNlcy5sZW5ndGggIC8gMztcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHRocm93IFwiSW5jb3JyZWN0IG51bWJlciBvZiB2ZXJ0ZXggdmFsdWVzXCJcclxuICAgICAgICB9XHJcbiAgICAgICAgXHJcbiAgICAgICAgdmFyIHByaW9yVmVydENvdW50ID0gbnVtVmVydGljZXM7XHJcbiAgICAgICAgdmFyIG5ld1ZlcnRleEluZGljZXM6IG51bWJlcltdID0gW107XHJcbiAgICAgICAgdmFyIG5ld1ZlcnRpY2VzIDogbnVtYmVyW10gPSBbXTtcclxuXHJcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBmYWNlSW5kaWNlcy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICB2YXIgb2xkVmVydGV4WCA9IHZlcnRpY2VzW2ZhY2VJbmRpY2VzW2ldICogM107XHJcbiAgICAgICAgICAgIHZhciBvbGRWZXJ0ZXhZID0gdmVydGljZXNbZmFjZUluZGljZXNbaV0gKiAzICsgMV07XHJcbiAgICAgICAgICAgIHZhciBvbGRWZXJ0ZXhaID0gdmVydGljZXNbZmFjZUluZGljZXNbaV0gKiAzICsgMl07XHJcblxyXG4gICAgICAgICAgICB2YXIgbmV3VmVydGV4WCA9IG9sZFZlcnRleFggKyBkaXJlY3Rpb24ueDtcclxuICAgICAgICAgICAgdmFyIG5ld1ZlcnRleFkgPSBvbGRWZXJ0ZXhZICsgZGlyZWN0aW9uLnk7XHJcbiAgICAgICAgICAgIHZhciBuZXdWZXJ0ZXhaID0gb2xkVmVydGV4WiArIGRpcmVjdGlvbi56O1xyXG5cclxuICAgICAgICAgICAgbmV3VmVydGljZXMucHVzaChuZXdWZXJ0ZXhYKTtcclxuICAgICAgICAgICAgbmV3VmVydGljZXMucHVzaChuZXdWZXJ0ZXhZKTtcclxuICAgICAgICAgICAgbmV3VmVydGljZXMucHVzaChuZXdWZXJ0ZXhaKTtcclxuXHJcbiAgICAgICAgICAgIG5ld1ZlcnRleEluZGljZXMucHVzaChwcmlvclZlcnRDb3VudCArIGkpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gQ3JlYXRlIG5ldyBmYWNlcyBmb3IgdGhlIDNEIG1lc2hcclxuICAgICAgICB2YXIgaSA9IDA7ICAgICAgICAgICAgICAvLyBJbmRleCBpbnRvIHRoZSBhcnJheSBvZiB2ZXJ0ZXggaW5kaWNlcyBvbiB0aGUgZXh0cnVkZWQgZmFjZVxyXG4gICAgICAgIHZhciBqID0gMDsgICAgICAgICAgICAgIC8vIEluZGV4IGludG8gdGhlIGFycmF5IG9mIGluZGljZXMgZm9yIHRoZSBuZXcgdmVydGljZXMgY3JlYXRlZFxyXG4gICAgICAgIHZhciBuZXdUcmlhbmdsZXMgOiBudW1iZXJbXSA9IFtdOyAgLy8gQXJyYXkgb2YgdHJpYW5nbGVzIGNyZWF0ZWQgZHVyaW5nIGV4dHJ1c2lvblxyXG5cclxuICAgICAgICB3aGlsZSAoaSA8IGZhY2VJbmRpY2VzLmxlbmd0aCkge1xyXG4gICAgICAgICAgICAvLyBPbiB0aGUgbGFzdCBpdGVyYXRpb24gd2UgdXNlIDAgaW5zdGVhZCBvZiBpKzEgb3IgaisxXHJcbiAgICAgICAgICAgIGlmIChpID09IGZhY2VJbmRpY2VzLmxlbmd0aCAtIDEpIHtcclxuICAgICAgICAgICAgICAgIC8vIENXXHJcbiAgICAgICAgICAgICAgICAvLyBCb3R0b20tbGVmdCB0cmlhbmdsZVxyXG4gICAgICAgICAgICAgICAgbmV3VHJpYW5nbGVzLnB1c2gobmV3VmVydGV4SW5kaWNlc1tqXSk7XHJcbiAgICAgICAgICAgICAgICBuZXdUcmlhbmdsZXMucHVzaChmYWNlSW5kaWNlc1swXSk7XHJcbiAgICAgICAgICAgICAgICBuZXdUcmlhbmdsZXMucHVzaChmYWNlSW5kaWNlc1tpXSk7XHJcblxyXG4gICAgICAgICAgICAgICAgLy8gVG9wLXJpZ2h0IHRyaWFuZ2xlXHJcbiAgICAgICAgICAgICAgICBuZXdUcmlhbmdsZXMucHVzaChuZXdWZXJ0ZXhJbmRpY2VzWzBdKTtcclxuICAgICAgICAgICAgICAgIG5ld1RyaWFuZ2xlcy5wdXNoKGZhY2VJbmRpY2VzWzBdKTtcclxuICAgICAgICAgICAgICAgIG5ld1RyaWFuZ2xlcy5wdXNoKG5ld1ZlcnRleEluZGljZXNbal0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIC8vIE90aGVyd2lzZSBhbGwgb3RoZXIgc2lkZXMgYXJlIGRvbmUgdGhlIHNhbWVcclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAvLyBDV1xyXG4gICAgICAgICAgICAgICAgLy8gQm90dG9tLWxlZnQgdHJpYW5nbGVcclxuICAgICAgICAgICAgICAgIG5ld1RyaWFuZ2xlcy5wdXNoKG5ld1ZlcnRleEluZGljZXNbal0pO1xyXG4gICAgICAgICAgICAgICAgbmV3VHJpYW5nbGVzLnB1c2goZmFjZUluZGljZXNbaSArIDFdKTtcclxuICAgICAgICAgICAgICAgIG5ld1RyaWFuZ2xlcy5wdXNoKGZhY2VJbmRpY2VzW2ldKTtcclxuXHJcbiAgICAgICAgICAgICAgICAvLyBUb3AtcmlnaHQgdHJpYW5nbGVcclxuICAgICAgICAgICAgICAgIG5ld1RyaWFuZ2xlcy5wdXNoKG5ld1ZlcnRleEluZGljZXNbaiArIDFdKTtcclxuICAgICAgICAgICAgICAgIG5ld1RyaWFuZ2xlcy5wdXNoKGZhY2VJbmRpY2VzW2kgKyAxXSk7XHJcbiAgICAgICAgICAgICAgICBuZXdUcmlhbmdsZXMucHVzaChuZXdWZXJ0ZXhJbmRpY2VzW2pdKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpKys7XHJcbiAgICAgICAgICAgIGorKztcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiB7IHZlcnRpY2VzOiBuZXdWZXJ0aWNlcywgdHJpYW5nbGVzOiBuZXdUcmlhbmdsZXMgfTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIE1vZGlmaWVzIHRoZSB2ZXJ0aWNlcyBvbiB0aGUgbGVmdCBhbmQgcmlnaHQgZWRnZXMgb2YgdGhlIHN3b3JkIGJsYWRlLlxyXG4gICAgICogR2l2ZW46IEEgc3dvcmQgZ2VuZXJhdG9yLCBhbGwgdGhlIG1vZGVsIHZlcnRpY2VzLCB0aGUgaW5kaWNlcyB0byB0aGUgbGVmdCBhbmQgcmlnaHQgZWRnZSB2ZXJ0aWNlcyxcclxuICAgICAqICAgICAgICB0aGUgZGVmYXVsdCBibGFkZSB3aXRoIGluIHRoZSB0ZW1wbGF0ZSwgd2lkdGggdG9sZXJhbmNlLCBhbmQgd2hldGhlciB0byBtYWtlIGVkZ2VzIHN5bW1ldHJpY1xyXG4gICAgICogUmV0dXJuczogQWxsIHRoZSB2ZXJ0aWNlcyBpbiB0aGUgbW9kZWwgYWZ0ZXIgYmVpbmcgbW9kaWZpZWRcclxuICAgICAqICMjIE5PVEU6IEN1cnJlbnRseSwgdGhpcyBvbmx5IGNyZWF0ZXMgc3ltbWV0cmljYWwgYmxhZGVzXHJcbiAgICAgKi9cclxuICAgIHN0YXRpYyBtb2RpZnlFZGdlV2lkdGgoc3dvcmRHZW5lcmF0b3IgOiBTd29yZEdlbmVyYXRvciwgdmVydGljZXMgOiBudW1iZXJbXSwgbGVmdEVkZ2VWZXJ0SW5kaWNlcyA6IG51bWJlcltdLCByaWdodEVkZ2VWZXJ0SW5kaWNlcyA6IG51bWJlcltdLCB0ZW1wbGF0ZUJsYWRlV2lkdGggOiBudW1iZXIsIHdpZHRoVG9sZXJhbmNlUmF0aW8gOiBudW1iZXIsIHN5bW1ldHJpYz10cnVlKSA6IG51bWJlcltdIHtcclxuICAgICAgICAvLyBSdWxlczpcclxuICAgICAgICAvLyBUaGUgeC12YWx1ZSBvZiB0aGUgdmVydGljZXMgbmVlZHMgdG8gYmUgd2l0aGluXHJcbiAgICAgICAgLy8gdGhlIHRvbGVyYW5jZSByYXRpb24gd2l0aCByZXNwZWN0IHRvIHRlbXBsYXRlQmxhZGVXaWR0aCAvIDJcclxuICAgICAgICAvLyBFeGFtcGxlOiBJZiB0aGUgYmxhZGUgdGVtcGxhdGUgaGFzIGEgd2lkdGggb2YgLjYgbWV0ZXJzIGFuZFxyXG4gICAgICAgIC8vICAgICAgICAgIHRoZSB0b2xlcmFuY2UgcmF0aW8gaXMgLjEsIHRoZW4gdGhlIHgtdmFsdWVzIG9mIHRoZVxyXG4gICAgICAgIC8vICAgICAgICAgIEJsYWRlRWRnZVZlcnRpY2VzIG1heSBub3QgZXhjZWVkXHJcbiAgICAgICAgLy8gICAgICAgICAgLjMgbWV0ZXJzICsvLSAuMDYgbWV0ZXJzXHJcbiAgICAgICAgdmFyIG1pbkJsYWRlV2lkdGggPSB0ZW1wbGF0ZUJsYWRlV2lkdGggLSAod2lkdGhUb2xlcmFuY2VSYXRpbyAqIHRlbXBsYXRlQmxhZGVXaWR0aCk7XHJcbiAgICAgICAgdmFyIG1heEJsYWRlV2lkdGggPSB0ZW1wbGF0ZUJsYWRlV2lkdGggKyAod2lkdGhUb2xlcmFuY2VSYXRpbyAqIHRlbXBsYXRlQmxhZGVXaWR0aCk7XHJcbiAgICAgICAgdmFyIGRpdmlzaW9uV2lkdGggPSB0ZW1wbGF0ZUJsYWRlV2lkdGg7XHJcblxyXG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGVmdEVkZ2VWZXJ0SW5kaWNlcy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICAvLyBSYW5kb21seSBnZW5lcmF0ZSBhIHdpZHRoIGZvciB0aGlzIHNlY3Rpb24gb2YgdGhlIGJsYWRlXHJcbiAgICAgICAgICAgIGRpdmlzaW9uV2lkdGggPSB0ZW1wbGF0ZUJsYWRlV2lkdGggKyAoc3dvcmRHZW5lcmF0b3IucmFuZEdlbmVyYXRvcigpICogKG1heEJsYWRlV2lkdGggLSBtaW5CbGFkZVdpZHRoKSk7XHJcbiAgICAgICAgICAgIHZlcnRpY2VzW2xlZnRFZGdlVmVydEluZGljZXNbaV0gKiAzICsgMF0gPSAtKGRpdmlzaW9uV2lkdGggLyAyKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcmlnaHRFZGdlVmVydEluZGljZXMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgaWYgKCFzeW1tZXRyaWMpIHtcclxuICAgICAgICAgICAgICAgIC8vIFJhbmRvbWx5IGdlbmVyYXRlIGEgd2lkdGggZm9yIHRoaXMgc2VjdGlvbiBvZiB0aGUgYmxhZGVcclxuICAgICAgICAgICAgICAgIGRpdmlzaW9uV2lkdGggPSB0ZW1wbGF0ZUJsYWRlV2lkdGggKyAoc3dvcmRHZW5lcmF0b3IucmFuZEdlbmVyYXRvcigpICogKG1heEJsYWRlV2lkdGggLSBtaW5CbGFkZVdpZHRoKSk7XHJcbiAgICAgICAgICAgICAgICB2ZXJ0aWNlc1tyaWdodEVkZ2VWZXJ0SW5kaWNlc1tpXSAqIDMgKyAwXSA9IChkaXZpc2lvbldpZHRoIC8gMik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSBpZiAoaSA8IGxlZnRFZGdlVmVydEluZGljZXMubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgICB2ZXJ0aWNlc1tyaWdodEVkZ2VWZXJ0SW5kaWNlc1tpXSAqIDMgKyAwXSA9IC0odmVydGljZXNbbGVmdEVkZ2VWZXJ0SW5kaWNlc1tpXSAqIDNdKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIHZlcnRpY2VzO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogTW92ZXMgYWxsIHRoZSB2ZXJ0aWNlcyBhdCB0aGUgdG9wIG9mIHRoZSBibGFkZSB0byB0aGUgY2VudGVyLCBjcmVhdGluZyBhIHBvaW50IGF0IHRoZSB0aXAuIFxyXG4gICAgICogR2l2ZW46IGFsbCB0aGUgdmVydGljZXMgaW4gdGhlIG1vZGVsIGFuZCB0aGUgaW5kaWNlcyBvZiB0aGUgdmVydGljZXMgYXQgdGhlIHRvcFxyXG4gICAgICogUmV0dXJuczogQWhlIGFsbCB0aGUgdmVydGljZXNcclxuICAgICAqL1xyXG4gICAgc3RhdGljIGNyZWF0ZUJsYWRlVGlwKHZlcnRpY2VzIDogbnVtYmVyW10sIHRvcFZlcnRJbmRpY2VzIDogbnVtYmVyW10pIDogbnVtYmVyW10ge1xyXG5cclxuICAgICAgICBmb3IodmFyIGkgPSAwOyBpIDwgdG9wVmVydEluZGljZXMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgdmVydGljZXNbdG9wVmVydEluZGljZXNbaV0gKiAzICsgMF0gPSAwO1xyXG4gICAgICAgICAgICB2ZXJ0aWNlc1t0b3BWZXJ0SW5kaWNlc1tpXSAqIDMgKyAyXSA9IDA7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gdmVydGljZXM7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqIFxyXG4gICAgICogR2l2ZW46IGFsbCB0aGUgdmVydGljZXMgaW4gdGhlIG1vZGVsLCB0aGUgbnVtYmVyIG9mIHN1YmRpdmlzaW9uIGluIHRoZSBibGFkZSwgYW5kIHRoZSBibGFkZSBsZW5ndGhcclxuICAgICAqIFJldHVybnM6IGEgMkQgYXJyYXkgb2YgdGhlIHZlcnRleCBpbmRpY2VzLCB3aGVyZSBlYWNoIHJvdyBpcyBvbmUgbGF5ZXIgY29udGFpbmluZyB2ZXJ0aWNlcyBhbGwgYXQgdGhlIHNhbWUgaGVpZ2h0XHJcbiAgICAgKiAjIyBOb3RlOiBBc3N1bWVzIHRoYXQgYWxsIHRoZSBibGFkZSBkaXZzIGFyZSBldmVubHkgc3BhY2VkIGJ5IDEgaW4gdGhlIHktZGlyZWN0aW9uXHJcbiAgICAgKi9cclxuICAgIHN0YXRpYyBnZXRBbGxWZXJ0c0luZGljZXNBc0xheWVycyh2ZXJ0aWNlcyA6IG51bWJlcltdLCBudW1EaXZzIDogbnVtYmVyLCBibGFkZUxlbmd0aDogbnVtYmVyKSA6IG51bWJlcltdW10ge1xyXG4gICAgICAgIHZhciB2ZXJ0ZXhJbmRpY2VzID0gW107XHJcbiAgICAgICAgdmFyIG51bVZlcnRpY2VzID0gMDtcclxuXHJcbiAgICAgICAgLy8gRG91YmxlIGNoZWNrIHRoYXQgd2UgaGF2ZSB0aGUgcHJvcGVyIG51bWJlciBvZiB2ZXJ0aWNlc1xyXG4gICAgICAgIGlmICh2ZXJ0aWNlcy5sZW5ndGggJSAzID09IDApIHtcclxuICAgICAgICAgICAgbnVtVmVydGljZXMgPSB2ZXJ0aWNlcy5sZW5ndGggIC8gMztcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHRocm93IFwiSW5jb3JyZWN0IG51bWJlciBvZiB2ZXJ0ZXggdmFsdWVzXCJcclxuICAgICAgICB9XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gQ2hlY2sgdGhlIHktdmFsdWUgb2YgZWFjaCBvZiB0aGUgdmVydGljZXNcclxuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IG51bURpdnM7IGkrKykge1xyXG4gICAgICAgICAgICB2YXIgdmVydGljZXNJbkxheWVyID0gW107XHJcblxyXG4gICAgICAgICAgICBmb3IgKHZhciBqID0gMDsgaiA8IG51bVZlcnRpY2VzOyBqKyspIHtcclxuICAgICAgICAgICAgICAgIGlmICh2ZXJ0aWNlc1tqICogMyArIDFdID09IGkpIHtcclxuICAgICAgICAgICAgICAgICAgICB2ZXJ0aWNlc0luTGF5ZXIucHVzaChqKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgdmVydGV4SW5kaWNlcy5wdXNoKHZlcnRpY2VzSW5MYXllcik7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gdmVydGV4SW5kaWNlcztcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEdpdmVuOiBhbGwgdGhlIHZlcnRpY2VzIGluIHRoZSBtb2RlbCBhbmQgKG9wdGlvbmFsbHkpIHRoZSBtb2RlbCdzIGhlaWdodFxyXG4gICAgICogUmV0dXJuczogdGhlIGluZGljZXMgb2YgdGhlIHZlcnRpY2VzIHRoYXQgYXJlIGF0IHRoZSBoaWdoZXN0IGxheWVyXHJcbiAgICAgKiAgICAgICAgICBpbiB0aGUgZ2VvbWV0cnkuXHJcbiAgICAgKiAjIyBOb3RlOiBBc3N1bWVzIHRoZSB0b3AgaXMgZmxhdCBhbmQgbGV2ZWxcclxuICAgICAqL1xyXG4gICAgc3RhdGljIGdldFRvcFZlcnRJbmRpY2VzKHZlcnRpY2VzIDogbnVtYmVyW10sIGdlb21IZWlnaHQ/IDogbnVtYmVyKSA6IG51bWJlcltdIHtcclxuICAgICAgICB2YXIgdG9wVmVydEluZGljZXMgPSBbXTtcclxuICAgICAgICB2YXIgbnVtVmVydGljZXMgPSAwO1xyXG5cclxuICAgICAgICAvLyBEb3VibGUgY2hlY2sgdGhhdCB3ZSBoYXZlIHRoZSBwcm9wZXIgbnVtYmVyIG9mIHZlcnRpY2VzXHJcbiAgICAgICAgaWYgKHZlcnRpY2VzLmxlbmd0aCAlIDMgPT0gMCkge1xyXG4gICAgICAgICAgICBudW1WZXJ0aWNlcyA9IHZlcnRpY2VzLmxlbmd0aCAgLyAzO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgdGhyb3cgXCJJbmNvcnJlY3QgbnVtYmVyIG9mIHZlcnRleCB2YWx1ZXNcIlxyXG4gICAgICAgIH1cclxuICAgICAgICBcclxuICAgICAgICBpZiAoZ2VvbUhlaWdodCAhPSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIC8vIEhlaWdodCBoYXMgYmVlbiBzcGVjaWZpZWQgc28gd2UgY2FuIGp1c3QgZ2V0IHRob3NlXHJcbiAgICAgICAgICAgIC8vIHZlcnRzIGFuZCByZXR1cm5cclxuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBudW1WZXJ0aWNlczsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAodmVydGljZXNbaSAqIDMgKyAxXSA9PSBnZW9tSGVpZ2h0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdG9wVmVydEluZGljZXMucHVzaChpKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgLy8gSGVpZ2h0IGlzIG5vdCBzcGVjaWZpZWQsIHNvIHdlIG11c3QgZmluZCB0aGUgaGVpZ2h0XHJcbiAgICAgICAgICAgIC8vIHRoZW4gcmV0dXJuIHRoZSB2ZXJ0cyBhdCB0aGF0IGhlaWdodFxyXG5cclxuICAgICAgICAgICAgdmFyIG1heEhlaWdodCA9IC0xO1xyXG4gICAgICAgICAgICB2YXIgaW5kZXhPZk1heCA9IC0xO1xyXG4gICAgICAgICAgICAvLyBGaW5kIHRoZSB2ZXJ0ZXggd2l0aCB0aGUgZ3JlYXRlc3QgaGVpZ2h0XHJcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbnVtVmVydGljZXM7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgaWYgKHZlcnRpY2VzW2kgKiAzICsgMV0gPiBtYXhIZWlnaHQpIHtcclxuICAgICAgICAgICAgICAgICAgICBpbmRleE9mTWF4ID0gaTtcclxuICAgICAgICAgICAgICAgICAgICBtYXhIZWlnaHQgPSB2ZXJ0aWNlc1tpICogMyArIDFdO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIC8vIEdldCBhbGwgdmVydGljZXMgYXQgdGhlIG1heCBoZWlnaHRcclxuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBudW1WZXJ0aWNlczsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAodmVydGljZXNbaSAqIDMgKyAxXSA9PSBtYXhIZWlnaHQpIHtcclxuICAgICAgICAgICAgICAgICAgICB0b3BWZXJ0SW5kaWNlcy5wdXNoKGkpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9ICAgXHJcbiAgICAgICAgfVxyXG4gICAgICAgIFxyXG4gICAgICAgIHJldHVybiB0b3BWZXJ0SW5kaWNlcztcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEdpdmVuOiBhbGwgdGhlIHZlcnRpY2VzIGluIHRoZSBtb2RlbCBhbmQgdGhlIGJsYWRlJ3Mgd2lkdGhcclxuICAgICAqIFJldHVybnM6IHRoZSBpbmRpY2VzIG9mIHRoZSB2ZXJ0aWNlcyBsb2NhdGVkIG9uIHRoZVxyXG4gICAgICogICAgICAgICAgbGVmdCBlZGdlIG9mIHRoZSBibGFkZVxyXG4gICAgICovXHJcbiAgICBzdGF0aWMgZ2V0TGVmdEVkZ2VWZXJ0SW5kaWNlcyh2ZXJ0aWNlcyA6IG51bWJlcltdLCBibGFkZVdpZHRoIDogbnVtYmVyKSA6IG51bWJlcltdIHtcclxuICAgICAgICB2YXIgbGVmdEVkZ2VJbmRpY2VzID0gW107XHJcbiAgICAgICAgdmFyIG51bVZlcnRpY2VzID0gMDtcclxuXHJcbiAgICAgICAgLy8gRG91YmxlIGNoZWNrIHRoYXQgd2UgaGF2ZSB0aGUgcHJvcGVyIG51bWJlciBvZiB2ZXJ0aWNlc1xyXG4gICAgICAgIGlmICh2ZXJ0aWNlcy5sZW5ndGggJSAzID09IDApIHtcclxuICAgICAgICAgICAgbnVtVmVydGljZXMgPSB2ZXJ0aWNlcy5sZW5ndGggIC8gMztcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHRocm93IFwiSW5jb3JyZWN0IG51bWJlciBvZiB2ZXJ0ZXggdmFsdWVzXCJcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbnVtVmVydGljZXM7IGkrKykge1xyXG4gICAgICAgICAgICBpZiAodmVydGljZXNbaSAqIDNdID09IC1ibGFkZVdpZHRoIC8gMikge1xyXG4gICAgICAgICAgICAgICAgbGVmdEVkZ2VJbmRpY2VzLnB1c2goaSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGxlZnRFZGdlSW5kaWNlcztcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEdpdmVuOiBhbGwgdGhlIHZlcnRpY2VzIGluIHRoZSBtb2RlbCBhbmQgdGhlIGJsYWRlJ3Mgd2lkdGhcclxuICAgICAqIFJldHVybnM6IHRoZSBpbmRpY2VzIG9mIHRoZSB2ZXJ0aWNlcyBsb2NhdGVkIG9uIHRoZVxyXG4gICAgICogICAgICAgICAgcmlnaHQgZWRnZSBvZiB0aGUgYmxhZGVcclxuICAgICAqL1xyXG4gICAgc3RhdGljIGdldFJpZ2h0RWRnZVZlcnRJbmRpY2VzKHZlcnRpY2VzIDogbnVtYmVyW10sIGJsYWRlV2lkdGggOiBudW1iZXIpIDogbnVtYmVyW10ge1xyXG4gICAgICAgIHZhciByaWdodEVkZ2VJbmRpY2VzID0gW107XHJcbiAgICAgICAgdmFyIG51bVZlcnRpY2VzID0gMDtcclxuXHJcbiAgICAgICAgLy8gRG91YmxlIGNoZWNrIHRoYXQgd2UgaGF2ZSB0aGUgcHJvcGVyIG51bWJlciBvZiB2ZXJ0aWNlc1xyXG4gICAgICAgIGlmICh2ZXJ0aWNlcy5sZW5ndGggJSAzID09IDApIHtcclxuICAgICAgICAgICAgbnVtVmVydGljZXMgPSB2ZXJ0aWNlcy5sZW5ndGggIC8gMztcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHRocm93IFwiSW5jb3JyZWN0IG51bWJlciBvZiB2ZXJ0ZXggdmFsdWVzXCJcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbnVtVmVydGljZXM7IGkrKykge1xyXG4gICAgICAgICAgICBpZiAodmVydGljZXNbaSAqIDNdID09IGJsYWRlV2lkdGggLyAyKSB7XHJcbiAgICAgICAgICAgICAgICByaWdodEVkZ2VJbmRpY2VzLnB1c2goaSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHJpZ2h0RWRnZUluZGljZXM7XHJcbiAgICB9XHJcblxyXG59XHJcblxyXG4iXX0=