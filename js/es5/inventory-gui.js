"use strict";jQuery.fn.extend({addRemoveItems:function b(a){return this.each(function(){var b=$(this).children(),c=a-b.length;if(0<c)for(var d=0;d<c;d++)b.last().clone().appendTo(this);else 0>c&&b.slice(c).remove()})},parentToAnimate:function g(a,b){b=b||"slow";var c=$(this);if(0<c.length){a=$(a);var d=c.offset();$(this).appendTo(a);var e=c.offset(),f=c.clone().appendTo("body");f.css({position:"absolute",left:d.left,top:d.top,zIndex:1e3}),c.hide(),f.animate({top:e.top,left:e.left},b,function(){c.show(),f.remove()})}}}),$("#row-count").on("input propertychange change",function(){var a=$(this).val();$("label[for=\""+$(this).attr("id")+"\"]").html(a),$("#personal-inventory.inventory-table").addRemoveItems(a),refreshSortableInventoryList()}).trigger("change"),$("#column-count").on("input propertychange change",function(){var a=$(this).val();$("label[for=\""+$(this).attr("id")+"\"]").html(a),$("#personal-inventory.inventory-table .inventory-row").addRemoveItems(a),refreshSortableInventoryList()}).trigger("change"),refreshSortableInventoryList();function refreshSortableInventoryList(){$(".inventory-cell").sortable({connectWith:".inventory-cell",placeholder:"inventory-item-sortable-placeholder",receive:function l(a,b){var c=$(this).closest(".inventory-table").attr("data-item-filter-whitelist"),d=$(this).closest(".inventory-table").attr("data-item-filter-blacklist"),e=c?c.split(/\s+/):[],f=d?d.split(/\s+/):[],g=$(b.item).attr("data-item-type"),h=g?g.split(/\s+/):[],i=verifyWithWhiteBlackLists(h,e,f);if(!i)console.log("Can't move to this slot"),$(b.item).parentToAnimate($(b.sender),200);else{$(this).children().not(b.item).parentToAnimate($(b.sender),200),$(this).find(".tooltip").remove();var j=getItemName($(b.item).attr("class")),k=playerInventory.getQuantity(j);if(1<k)b.item.clone();else;}}}).each(function(){$(this).attr("data-slot-position-x",$(this).prevAll(".inventory-cell").length),$(this).attr("data-slot-position-y",$(this).closest(".inventory-row").prevAll(".inventory-row").length)}).disableSelection()}function verifyWithWhiteBlackLists(a,b,c){if(0==b.length&&0==c.length)return!0;var d=!1;$.each(c,function(b,e){var f=e.split(/\+/);console.log(f);for(var g=!0,h=0;h<f.length;h++)g=0<c.length&&-1!==$.inArray(f[h],a)?g&&!0:g&&!1;g&&(d=!0)}),d=!!(0<c.length)&&d;var e=!1;return $.each(b,function(c,d){for(var f=d.split(/\+/),g=!0,h=0;h<f.length;h++)g=0<b.length&&-1!==$.inArray(f[h],a)?g&&!0:g&&!1;g&&(e=!0)}),e=!!(0<b.length)&&e,console.log("inWhite: "+e+" - inBlack: "+d),(0==b.length||e)&&!d}